<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VulkanRaytracingCycles: vkmm::Allocator_T Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VulkanRaytracingCycles<span id="projectnumber">&#160;0.0.0</span>
   </div>
   <div id="projectbrief">Cycles Render Engine With VulkanRaytracingShaderModules. ( Experiment , in progress)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('structvkmm_1_1_allocator___t.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structvkmm_1_1_allocator___t-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">vkmm::Allocator_T Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:afeff925dde123dcda1561cf8a16113b2"><td class="memItemLeft" align="right" valign="top">typedef tbb::concurrent_unordered_map&lt; int, vkmm::Allocation, std::hash&lt; int &gt;, std::equal_to&lt; int &gt;, <a class="el" href="namespacefront.html#a7a8228f68f8eeb294b250e52fd5eac4a">front::tbbTAllocator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">AllocMapTy</a></td></tr>
<tr class="memdesc:afeff925dde123dcda1561cf8a16113b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">COM VmaBlockVector* m_pBlockVectors[VK_MAX_MEMORY_TYPES];.  <a href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">More...</a><br /></td></tr>
<tr class="separator:afeff925dde123dcda1561cf8a16113b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afebd6caedfdce2fe7b4b0a53b959e012"><td class="memItemLeft" align="right" valign="top">typedef tbb::concurrent_unordered_map&lt; int, <a class="el" href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">AllocMapTy</a>, std::hash&lt; int &gt;, std::equal_to&lt; int &gt;, <a class="el" href="namespacefront.html#a7a8228f68f8eeb294b250e52fd5eac4a">front::tbbTAllocator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#afebd6caedfdce2fe7b4b0a53b959e012">AllocMapMapTy</a></td></tr>
<tr class="separator:afebd6caedfdce2fe7b4b0a53b959e012"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adbb9892c2594c71640891227c169291f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#adbb9892c2594c71640891227c169291f">Allocator_T</a> ()</td></tr>
<tr class="separator:adbb9892c2594c71640891227c169291f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ece23eb4027cbf0ff288c5fc3d7597"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a19ece23eb4027cbf0ff288c5fc3d7597">Allocator_T</a> (const <a class="el" href="structvkmm_1_1_allocator_create_info.html">AllocatorCreateInfo</a> *pCreateInfo)</td></tr>
<tr class="separator:a19ece23eb4027cbf0ff288c5fc3d7597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4cf5b1c83c47aaaa99057dc9d638bb4"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ae4cf5b1c83c47aaaa99057dc9d638bb4">Init</a> (const <a class="el" href="structvkmm_1_1_allocator_create_info.html">AllocatorCreateInfo</a> *pCreateInfo)</td></tr>
<tr class="separator:ae4cf5b1c83c47aaaa99057dc9d638bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0e0900ed8725944954e1e1f83ff4f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a3f0e0900ed8725944954e1e1f83ff4f4">~Allocator_T</a> ()</td></tr>
<tr class="separator:a3f0e0900ed8725944954e1e1f83ff4f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a05d50e9cd40c257fd613c54d4adda2"><td class="memItemLeft" align="right" valign="top">const VkAllocationCallbacks *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a7a05d50e9cd40c257fd613c54d4adda2">GetAllocationCallbacks</a> () const</td></tr>
<tr class="separator:a7a05d50e9cd40c257fd613c54d4adda2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a2696ed5476ecb52c7faa4c44c8457"><td class="memItemLeft" align="right" valign="top">VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ab1a2696ed5476ecb52c7faa4c44c8457">GetBufferImageGranularity</a> () const</td></tr>
<tr class="separator:ab1a2696ed5476ecb52c7faa4c44c8457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c301c65674b825666cea295f3517a1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ad4c301c65674b825666cea295f3517a1">GetMemoryHeapCount</a> () const</td></tr>
<tr class="separator:ad4c301c65674b825666cea295f3517a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b51ad65de2321d6b1936ffb28cb0f42"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a8b51ad65de2321d6b1936ffb28cb0f42">GetMemoryTypeCount</a> () const</td></tr>
<tr class="separator:a8b51ad65de2321d6b1936ffb28cb0f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab3b1cc35b312451179acc4ad8ad5a61"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#aab3b1cc35b312451179acc4ad8ad5a61">MemoryTypeIndexToHeapIndex</a> (uint32_t memTypeIndex) const</td></tr>
<tr class="separator:aab3b1cc35b312451179acc4ad8ad5a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3322e10a23231f6298c75a765b75b360"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a3322e10a23231f6298c75a765b75b360">IsMemoryTypeNonCoherent</a> (uint32_t memTypeIndex) const</td></tr>
<tr class="separator:a3322e10a23231f6298c75a765b75b360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6581a3e9a38f05c0d8525937e049dfb"><td class="memItemLeft" align="right" valign="top">VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ac6581a3e9a38f05c0d8525937e049dfb">GetMemoryTypeMinAlignment</a> (uint32_t memTypeIndex) const</td></tr>
<tr class="separator:ac6581a3e9a38f05c0d8525937e049dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7566e3e4e9ac27aae37eb527944a580d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a7566e3e4e9ac27aae37eb527944a580d">IsIntegratedGpu</a> () const</td></tr>
<tr class="separator:a7566e3e4e9ac27aae37eb527944a580d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96cdb09335ac8d7b30bfc3e2fbf66bc7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a96cdb09335ac8d7b30bfc3e2fbf66bc7">GetBufferMemoryRequirements</a> (VkBuffer hBuffer, VkMemoryRequirements &amp;memReq, bool &amp;requiresDedicatedAllocation, bool &amp;prefersDedicatedAllocation) const</td></tr>
<tr class="separator:a96cdb09335ac8d7b30bfc3e2fbf66bc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a611463eb1d500a668c6b1f7272806e7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a611463eb1d500a668c6b1f7272806e7e">GetImageMemoryRequirements</a> (VkImage hImage, VkMemoryRequirements &amp;memReq, bool &amp;requiresDedicatedAllocation, bool &amp;prefersDedicatedAllocation) const</td></tr>
<tr class="separator:a611463eb1d500a668c6b1f7272806e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b5f286ec2c4bfa90a9ad944803dfb70"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a5b5f286ec2c4bfa90a9ad944803dfb70">AllocateMemory</a> (const VkMemoryRequirements &amp;vkMemReq, bool requiresDedicatedAllocation, bool prefersDedicatedAllocation, VkBuffer dedicatedBuffer, VkImage dedicatedImage, <a class="el" href="structvkmm_1_1_allocation_create_info.html">AllocationCreateInfo</a> &amp;createInfo, <a class="el" href="namespacevkmm.html#afff914a40f73475bdfc7931e145923a8">SuballocationType</a> suballocType, Allocation *pAllocation)</td></tr>
<tr class="separator:a5b5f286ec2c4bfa90a9ad944803dfb70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ea701770f0ea904c7a32a88caebfe6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a67ea701770f0ea904c7a32a88caebfe6">FreeMemory</a> (const Allocation allocation)</td></tr>
<tr class="separator:a67ea701770f0ea904c7a32a88caebfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d080456d6832df21211055223d0b4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ae2d080456d6832df21211055223d0b4c">CalculateStats</a> (<a class="el" href="structvkmm_1_1_stats.html">Stats</a> *pStats)</td></tr>
<tr class="separator:ae2d080456d6832df21211055223d0b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b200016f22f47763074ba3e16cf084f"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a1b200016f22f47763074ba3e16cf084f">Defragment</a> (Allocation *pAllocations, size_t allocationCount, VkBool32 *pAllocationsChanged, const <a class="el" href="structvkmm_1_1_defragmentation_info.html">DefragmentationInfo</a> *pDefragmentationInfo, <a class="el" href="structvkmm_1_1_defragmentation_stats.html">DefragmentationStats</a> *pDefragmentationStats)</td></tr>
<tr class="separator:a1b200016f22f47763074ba3e16cf084f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ff461398be4609946b016cfbbe1b5f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a5ff461398be4609946b016cfbbe1b5f7">GetAllocationInfo</a> (Allocation hAllocation, <a class="el" href="structvkmm_1_1_allocation_info.html">AllocationInfo</a> *pAllocationInfo)</td></tr>
<tr class="separator:a5ff461398be4609946b016cfbbe1b5f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae70583496b835894f74ecc84bd15e948"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ae70583496b835894f74ecc84bd15e948">TouchAllocation</a> (Allocation hAllocation)</td></tr>
<tr class="separator:ae70583496b835894f74ecc84bd15e948"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b34b09648e6e6e672d0d53c3e7421f0"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a5b34b09648e6e6e672d0d53c3e7421f0">CreatePool</a> (const <a class="el" href="structvkmm_1_1_pool_create_info.html">PoolCreateInfo</a> *pCreateInfo, Pool *pPool)</td></tr>
<tr class="separator:a5b34b09648e6e6e672d0d53c3e7421f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe254520a3e9bb18f58550896faebc2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#abe254520a3e9bb18f58550896faebc2a">DestroyPool</a> (Pool pool)</td></tr>
<tr class="separator:abe254520a3e9bb18f58550896faebc2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a811ea95dfa76bf5d2627bdc98f052b7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a811ea95dfa76bf5d2627bdc98f052b7f">GetPoolStats</a> (Pool pool, <a class="el" href="structvkmm_1_1_pool_stats.html">PoolStats</a> *pPoolStats)</td></tr>
<tr class="separator:a811ea95dfa76bf5d2627bdc98f052b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c88aa6f5a62bad5e5ff12313147745a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a2c88aa6f5a62bad5e5ff12313147745a">SetCurrentFrameIndex</a> (uint32_t frameIndex)</td></tr>
<tr class="separator:a2c88aa6f5a62bad5e5ff12313147745a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac764fdc570ebfbc6f073bd6b6286955"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#aac764fdc570ebfbc6f073bd6b6286955">GetCurrentFrameIndex</a> () const</td></tr>
<tr class="separator:aac764fdc570ebfbc6f073bd6b6286955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49262ae2e2ff6833bd3a29e9f05a662e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a49262ae2e2ff6833bd3a29e9f05a662e">MakePoolAllocationsLost</a> (Pool hPool, size_t *pLostAllocationCount)</td></tr>
<tr class="separator:a49262ae2e2ff6833bd3a29e9f05a662e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5824afca205aa9205133c2f56bf37eae"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a5824afca205aa9205133c2f56bf37eae">CheckPoolCorruption</a> (Pool hPool)</td></tr>
<tr class="separator:a5824afca205aa9205133c2f56bf37eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0273b41ac5cc1ecc659ef11cb1e3e249"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a0273b41ac5cc1ecc659ef11cb1e3e249">CheckCorruption</a> (uint32_t memoryTypeBits)</td></tr>
<tr class="separator:a0273b41ac5cc1ecc659ef11cb1e3e249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a128632845776ef17f5b4199dc7f11907"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a128632845776ef17f5b4199dc7f11907">CreateLostAllocation</a> (Allocation *pAllocation)</td></tr>
<tr class="separator:a128632845776ef17f5b4199dc7f11907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147f01e5aeea587b8bb9e8a6566da437"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a147f01e5aeea587b8bb9e8a6566da437">AllocateVulkanMemory</a> (VkMemoryAllocateInfo *pAllocateInfo, VkDeviceMemory *pMemory)</td></tr>
<tr class="separator:a147f01e5aeea587b8bb9e8a6566da437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade3a9d1e99c19b97d1c5e6697ab27172"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ade3a9d1e99c19b97d1c5e6697ab27172">FreeVulkanMemory</a> (uint32_t memoryType, VkDeviceSize size, VkDeviceMemory hMemory)</td></tr>
<tr class="separator:ade3a9d1e99c19b97d1c5e6697ab27172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e43e9453b2f2c6fe6ee2447286be9d0"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a2e43e9453b2f2c6fe6ee2447286be9d0">Map</a> (Allocation hAllocation, void **ppData)</td></tr>
<tr class="separator:a2e43e9453b2f2c6fe6ee2447286be9d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45acc41c204faa509d847343cf809695"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a45acc41c204faa509d847343cf809695">Unmap</a> (Allocation hAllocation)</td></tr>
<tr class="separator:a45acc41c204faa509d847343cf809695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab708d3892e16e981324489e8fc67241f"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ab708d3892e16e981324489e8fc67241f">BindBufferMemory</a> (Allocation hAllocation, VkBuffer hBuffer)</td></tr>
<tr class="separator:ab708d3892e16e981324489e8fc67241f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52c2c2bd88e8f9950625ba5bb0f0e918"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a52c2c2bd88e8f9950625ba5bb0f0e918">BindImageMemory</a> (Allocation hAllocation, VkImage hImage)</td></tr>
<tr class="separator:a52c2c2bd88e8f9950625ba5bb0f0e918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1322e5e8e82ac40f15686de09bddc45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#aa1322e5e8e82ac40f15686de09bddc45">FlushOrInvalidateAllocation</a> (Allocation hAllocation, VkDeviceSize offset, VkDeviceSize size, <a class="el" href="namespacevkmm.html#ab3981f40253dd3d1328ecc3721b7c99f">CACHE_OPERATION</a> op)</td></tr>
<tr class="separator:aa1322e5e8e82ac40f15686de09bddc45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9db38a13a0fdce122fa65d3afc78bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a1a9db38a13a0fdce122fa65d3afc78bc">FillAllocation</a> (const Allocation hAllocation, uint8_t pattern)</td></tr>
<tr class="separator:a1a9db38a13a0fdce122fa65d3afc78bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd5fc1429a7c1e92b47d779ec4b3860"><td class="memItemLeft" align="right" valign="top">VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a5dd5fc1429a7c1e92b47d779ec4b3860">CalcPreferredBlockSize</a> (uint32_t memTypeIndex)</td></tr>
<tr class="memdesc:a5dd5fc1429a7c1e92b47d779ec4b3860"><td class="mdescLeft">&#160;</td><td class="mdescRight">COM VmaVulkanFunctions m_VulkanFunctions;.  <a href="structvkmm_1_1_allocator___t.html#a5dd5fc1429a7c1e92b47d779ec4b3860">More...</a><br /></td></tr>
<tr class="separator:a5dd5fc1429a7c1e92b47d779ec4b3860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa766c3a5857919710629c25d66ab6141"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#aa766c3a5857919710629c25d66ab6141">AllocateMemoryOfType</a> (VkDeviceSize size, VkDeviceSize alignment, bool dedicatedAllocation, VkBuffer dedicatedBuffer, VkImage dedicatedImage, <a class="el" href="structvkmm_1_1_allocation_create_info.html">AllocationCreateInfo</a> &amp;createInfo, uint32_t memTypeIndex, <a class="el" href="namespacevkmm.html#afff914a40f73475bdfc7931e145923a8">SuballocationType</a> suballocType, Allocation *pAllocation)</td></tr>
<tr class="separator:aa766c3a5857919710629c25d66ab6141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73b2324c5161a848f40661e1ffb4f34b"><td class="memItemLeft" align="right" valign="top">VkResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a73b2324c5161a848f40661e1ffb4f34b">AllocateDedicatedMemory</a> (VkDeviceSize size, <a class="el" href="namespacevkmm.html#afff914a40f73475bdfc7931e145923a8">SuballocationType</a> suballocType, uint32_t memTypeIndex, bool map, bool isUserDataString, <a class="el" href="structvkmm_1_1_allocation_create_info.html">AllocationCreateInfo</a> &amp;createInfo, VkBuffer dedicatedBuffer, VkImage dedicatedImage, Allocation *pAllocation)</td></tr>
<tr class="separator:a73b2324c5161a848f40661e1ffb4f34b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ef7e0216dca87fa6c3ac531f53ec7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a42ef7e0216dca87fa6c3ac531f53ec7a">FreeDedicatedMemory</a> (Allocation allocation)</td></tr>
<tr class="separator:a42ef7e0216dca87fa6c3ac531f53ec7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a51507d8e15e667518e7feced00deb9da"><td class="memItemLeft" align="right" valign="top">SRWLOCK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a51507d8e15e667518e7feced00deb9da">slim</a></td></tr>
<tr class="separator:a51507d8e15e667518e7feced00deb9da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd142a2e85732ac7f07577bf94a24f2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#abdd142a2e85732ac7f07577bf94a24f2">m_UseMutex</a></td></tr>
<tr class="separator:abdd142a2e85732ac7f07577bf94a24f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af916e272ecb0dbea8356c26a561c1010"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#af916e272ecb0dbea8356c26a561c1010">m_UseKhrDedicatedAllocation</a></td></tr>
<tr class="separator:af916e272ecb0dbea8356c26a561c1010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700bb5300d8388aa37c21f3f14fcff50"><td class="memItemLeft" align="right" valign="top">VkDevice&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a></td></tr>
<tr class="separator:a700bb5300d8388aa37c21f3f14fcff50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a012a58a37d959ab717ec7ee5cbbd35b1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a012a58a37d959ab717ec7ee5cbbd35b1">m_AllocationCallbacksSpecified</a></td></tr>
<tr class="separator:a012a58a37d959ab717ec7ee5cbbd35b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78da199465312609d018c4a639b419e5"><td class="memItemLeft" align="right" valign="top">VkAllocationCallbacks&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a78da199465312609d018c4a639b419e5">m_AllocationCallbacks</a></td></tr>
<tr class="separator:a78da199465312609d018c4a639b419e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a992a462f20ad09c02d8e95739546be39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvkmm_1_1_device_memory_callbacks.html">DeviceMemoryCallbacks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a></td></tr>
<tr class="separator:a992a462f20ad09c02d8e95739546be39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c0d6ad490b2b9b07143a92f27b1adf5"><td class="memItemLeft" align="right" valign="top">VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a> [<a class="el" href="_allocator_vk_8h.html#a99d48e5e4c73610e657f431f4129663a">VK_MAX_MEMORY_HEAPS_MIN</a>]</td></tr>
<tr class="separator:a2c0d6ad490b2b9b07143a92f27b1adf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9bcdf66b4581ef5eaa375adc1b70c1a"><td class="memItemLeft" align="right" valign="top">VkPhysicalDeviceProperties&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a></td></tr>
<tr class="memdesc:ad9bcdf66b4581ef5eaa375adc1b70c1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">COM VMA_MUTEX m_HeapSizeLimitMutex;.  <a href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">More...</a><br /></td></tr>
<tr class="separator:ad9bcdf66b4581ef5eaa375adc1b70c1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fbf088e770a2ea8a42b4b421fb928a9"><td class="memItemLeft" align="right" valign="top">VkPhysicalDeviceMemoryProperties&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a></td></tr>
<tr class="separator:a0fbf088e770a2ea8a42b4b421fb928a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c10650c8d62bf794fec91e8229ca8d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvkmm_1_1_allocator___t.html#afebd6caedfdce2fe7b4b0a53b959e012">AllocMapMapTy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a1c10650c8d62bf794fec91e8229ca8d9">m_pDedicatedAllocations</a></td></tr>
<tr class="separator:a1c10650c8d62bf794fec91e8229ca8d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62ce8d2fa448c42f9def5045086f96a"><td class="memItemLeft" align="right" valign="top">VkDeviceSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#aa62ce8d2fa448c42f9def5045086f96a">m_PreferredLargeHeapBlockSize</a></td></tr>
<tr class="memdesc:aa62ce8d2fa448c42f9def5045086f96a"><td class="mdescLeft">&#160;</td><td class="mdescRight">private:  <a href="structvkmm_1_1_allocator___t.html#aa62ce8d2fa448c42f9def5045086f96a">More...</a><br /></td></tr>
<tr class="separator:aa62ce8d2fa448c42f9def5045086f96a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ad577328dd317548b1f480420808ad"><td class="memItemLeft" align="right" valign="top">VkPhysicalDevice&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a51ad577328dd317548b1f480420808ad">m_PhysicalDevice</a></td></tr>
<tr class="separator:a51ad577328dd317548b1f480420808ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89bc733d7c57eca0df546f31c166919f"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; UINT &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a89bc733d7c57eca0df546f31c166919f">m_CurrentFrameIndex</a></td></tr>
<tr class="separator:a89bc733d7c57eca0df546f31c166919f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6babc882fdedd2f2964af42bb0f631a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_allocator_vk_8h.html#a54a7d528826c6e4b91b347493b62e2ba">VkmmVector</a>&lt; Pool, <a class="el" href="classvkmm_1_1_stl_allocator.html">StlAllocator</a>&lt; Pool &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a6babc882fdedd2f2964af42bb0f631a0">m_Pools</a></td></tr>
<tr class="memdesc:a6babc882fdedd2f2964af42bb0f631a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">COM VMA_MUTEX m_PoolsMutex;.  <a href="structvkmm_1_1_allocator___t.html#a6babc882fdedd2f2964af42bb0f631a0">More...</a><br /></td></tr>
<tr class="separator:a6babc882fdedd2f2964af42bb0f631a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ded6e6d2732ed51a306f0fd57266a6"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvkmm_1_1_allocator___t.html#a27ded6e6d2732ed51a306f0fd57266a6">m_NextPoolId</a></td></tr>
<tr class="separator:a27ded6e6d2732ed51a306f0fd57266a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00907">907</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="afebd6caedfdce2fe7b4b0a53b959e012" name="afebd6caedfdce2fe7b4b0a53b959e012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afebd6caedfdce2fe7b4b0a53b959e012">&#9670;&nbsp;</a></span>AllocMapMapTy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef tbb::concurrent_unordered_map&lt;int, <a class="el" href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">AllocMapTy</a>, std::hash&lt;int&gt;, std::equal_to&lt;int&gt;, <a class="el" href="namespacefront.html#a7a8228f68f8eeb294b250e52fd5eac4a">front::tbbTAllocator</a>&gt; <a class="el" href="structvkmm_1_1_allocator___t.html#afebd6caedfdce2fe7b4b0a53b959e012">vkmm::Allocator_T::AllocMapMapTy</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00934">934</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="afeff925dde123dcda1561cf8a16113b2" name="afeff925dde123dcda1561cf8a16113b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeff925dde123dcda1561cf8a16113b2">&#9670;&nbsp;</a></span>AllocMapTy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef tbb::concurrent_unordered_map&lt;int, vkmm::Allocation, std::hash&lt;int&gt;, std::equal_to&lt;int&gt;, <a class="el" href="namespacefront.html#a7a8228f68f8eeb294b250e52fd5eac4a">front::tbbTAllocator</a>&gt; <a class="el" href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">vkmm::Allocator_T::AllocMapTy</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>COM VmaBlockVector* m_pBlockVectors[VK_MAX_MEMORY_TYPES];. </p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00933">933</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adbb9892c2594c71640891227c169291f" name="adbb9892c2594c71640891227c169291f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbb9892c2594c71640891227c169291f">&#9670;&nbsp;</a></span>Allocator_T() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vkmm::Allocator_T::Allocator_T </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00939">939</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  939</span>{};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a19ece23eb4027cbf0ff288c5fc3d7597" name="a19ece23eb4027cbf0ff288c5fc3d7597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19ece23eb4027cbf0ff288c5fc3d7597">&#9670;&nbsp;</a></span>Allocator_T() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vkmm::Allocator_T::Allocator_T </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvkmm_1_1_allocator_create_info.html">AllocatorCreateInfo</a> *&#160;</td>
          <td class="paramname"><em>pCreateInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >COM ImportVulkanFunctions(pCreateInfo-&gt;pVulkanFunctions);</p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01189">1189</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1189</span>                                                                   :</div>
<div class="line"><span class="lineno"> 1190</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#abdd142a2e85732ac7f07577bf94a24f2">m_UseMutex</a>((pCreateInfo-&gt;flags&amp; <a class="code hl_enumvalue" href="namespacevkmm.html#ad8c018725e18ffbcf0ce02abd261e770a8750b68b276e80e7dd3f828349f8fa22">ALLOCATOR_CREATE_EXTERNALLY_SYNCHRONIZED_BIT</a>) == 0),</div>
<div class="line"><span class="lineno"> 1191</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#af916e272ecb0dbea8356c26a561c1010">m_UseKhrDedicatedAllocation</a>((pCreateInfo-&gt;flags&amp; <a class="code hl_enumvalue" href="namespacevkmm.html#ad8c018725e18ffbcf0ce02abd261e770ae12701fc3af67343c6f6ad5eec40ea53">ALLOCATOR_CREATE_KHR_DEDICATED_ALLOCATION_BIT</a>) != 0),</div>
<div class="line"><span class="lineno"> 1192</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>($device),</div>
<div class="line"><span class="lineno"> 1193</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a012a58a37d959ab717ec7ee5cbbd35b1">m_AllocationCallbacksSpecified</a>(pCreateInfo-&gt;pAllocationCallbacks != <span class="keyword">nullptr</span>),</div>
<div class="line"><span class="lineno"> 1194</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a78da199465312609d018c4a639b419e5">m_AllocationCallbacks</a>(pCreateInfo-&gt;pAllocationCallbacks ?</div>
<div class="line"><span class="lineno"> 1195</span>            *pCreateInfo-&gt;pAllocationCallbacks : EmptyAllocationCallbacks),</div>
<div class="line"><span class="lineno"> 1196</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#aa62ce8d2fa448c42f9def5045086f96a">m_PreferredLargeHeapBlockSize</a>(0),</div>
<div class="line"><span class="lineno"> 1197</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a51ad577328dd317548b1f480420808ad">m_PhysicalDevice</a>($physicaldevice),</div>
<div class="line"><span class="lineno"> 1198</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a89bc733d7c57eca0df546f31c166919f">m_CurrentFrameIndex</a>(0),</div>
<div class="line"><span class="lineno"> 1199</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a6babc882fdedd2f2964af42bb0f631a0">m_Pools</a>(StlAllocator&lt;Pool&gt;(<a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a7a05d50e9cd40c257fd613c54d4adda2">GetAllocationCallbacks</a>())),</div>
<div class="line"><span class="lineno"> 1200</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a27ded6e6d2732ed51a306f0fd57266a6">m_NextPoolId</a>(0)</div>
<div class="line"><span class="lineno"> 1201</span>    {</div>
<div class="line"><span class="lineno"> 1202</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#af916e272ecb0dbea8356c26a561c1010">m_UseKhrDedicatedAllocation</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1203</span>        InitializeSRWLock(&amp;<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a51507d8e15e667518e7feced00deb9da">slim</a>);</div>
<div class="line"><span class="lineno"> 1204</span> </div>
<div class="line"><span class="lineno"> 1205</span><span class="preprocessor">#ifdef USE_HIREDIS</span></div>
<div class="line"><span class="lineno"> 1206</span>        rlog.SetUp();</div>
<div class="line"><span class="lineno"> 1207</span>        rlog.FlushDB(15);</div>
<div class="line"><span class="lineno"> 1208</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1209</span> </div>
<div class="line"><span class="lineno"> 1210</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="_allocator_vk_8h.html#aa763a869736c3d2a758daa234aeeb19a">_DEBUG_DETECT_CORRUPTION</a>)</div>
<div class="line"><span class="lineno"> 1211</span>        {</div>
<div class="line"><span class="lineno"> 1212</span>            <span class="comment">// Needs to be multiply of uint32_t size because we are going to write VMA_CORRUPTION_DETECTION_MAGIC_VALUE to it.</span></div>
<div class="line"><span class="lineno"> 1213</span>            assert(<a class="code hl_define" href="_allocator_vk_8h.html#aaba51e4043fa15d543352c870cecf754">_DEBUG_MARGIN</a> % <span class="keyword">sizeof</span>(uint32_t) == 0);</div>
<div class="line"><span class="lineno"> 1214</span>        }</div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span>        assert($physicaldevice &amp;&amp; $device);</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span><span class="preprocessor">#if !(DEDICATED_ALLOCATION)</span></div>
<div class="line"><span class="lineno"> 1219</span>        <span class="keywordflow">if</span> ((pCreateInfo-&gt;flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#ad8c018725e18ffbcf0ce02abd261e770ae12701fc3af67343c6f6ad5eec40ea53">ALLOCATOR_CREATE_KHR_DEDICATED_ALLOCATION_BIT</a>) != 0)</div>
<div class="line"><span class="lineno"> 1220</span>        {</div>
<div class="line"><span class="lineno"> 1221</span>            assert(0 &amp;&amp; <span class="stringliteral">&quot;VMA_ALLOCATOR_CREATE_KHR_DEDICATED_ALLOCATION_BIT set but required extensions are disabled by preprocessor macros.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1222</span>        }</div>
<div class="line"><span class="lineno"> 1223</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1224</span> </div>
<div class="line"><span class="lineno"> 1225</span>        memset(&amp;<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>));</div>
<div class="line"><span class="lineno"> 1226</span>        memset(&amp;<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a>));</div>
<div class="line"><span class="lineno"> 1227</span>        memset(&amp;<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>));</div>
<div class="line"><span class="lineno"> 1228</span> </div>
<div class="line"><span class="lineno"> 1229</span>        <span class="comment">// memset(&amp;m_pBlockVectors, 0, sizeof(m_pBlockVectors));</span></div>
<div class="line"><span class="lineno"> 1230</span>       <span class="comment">// memset(&amp;m_pDedicatedAllocations, 0, sizeof(m_pDedicatedAllocations));</span></div>
<div class="line"><span class="lineno"> 1231</span> </div>
<div class="line"><span class="lineno"> 1232</span>        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code hl_define" href="_allocator_vk_8h.html#a99d48e5e4c73610e657f431f4129663a">VK_MAX_MEMORY_HEAPS_MIN</a>; ++i)</div>
<div class="line"><span class="lineno"> 1233</span>        {</div>
<div class="line"><span class="lineno"> 1234</span>            <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a>[i] = VK_WHOLE_SIZE;</div>
<div class="line"><span class="lineno"> 1235</span>        }</div>
<div class="line"><span class="lineno"> 1236</span> </div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">if</span> (pCreateInfo-&gt;pDeviceMemoryCallbacks != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1238</span>        {</div>
<div class="line"><span class="lineno"> 1239</span>            <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>.<a class="code hl_variable" href="structvkmm_1_1_device_memory_callbacks.html#a99b9a21a5fee89c829e4b157765b63ae">pfnAllocate</a> = pCreateInfo-&gt;pDeviceMemoryCallbacks-&gt;pfnAllocate;</div>
<div class="line"><span class="lineno"> 1240</span>            <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>.<a class="code hl_variable" href="structvkmm_1_1_device_memory_callbacks.html#a54d4327cc4bce938703b92a6b01208b5">pfnFree</a> = pCreateInfo-&gt;pDeviceMemoryCallbacks-&gt;pfnFree;</div>
<div class="line"><span class="lineno"> 1241</span>        }</div>
<div class="line"><span class="lineno"> 1242</span> </div>
<div class="line"><span class="lineno"> 1244</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a> = $properties;</div>
<div class="line"><span class="lineno"> 1245</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a> = $memoryProperties;</div>
<div class="line"><span class="lineno"> 1246</span> </div>
<div class="line"><span class="lineno"> 1247</span>        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#aa62ce8d2fa448c42f9def5045086f96a">m_PreferredLargeHeapBlockSize</a> = (pCreateInfo-&gt;preferredLargeHeapBlockSize != 0) ?</div>
<div class="line"><span class="lineno"> 1248</span>            pCreateInfo-&gt;preferredLargeHeapBlockSize : <span class="keyword">static_cast&lt;</span>VkDeviceSize<span class="keyword">&gt;</span>(<a class="code hl_define" href="_allocator_vk_8h.html#a9eeba9a7f616ef65648e404525111e30">_DEFAULT_LARGE_HEAP_BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span>        <span class="keywordflow">if</span> (pCreateInfo-&gt;pHeapSizeLimit != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1251</span>        {</div>
<div class="line"><span class="lineno"> 1252</span>            <span class="keywordflow">for</span> (uint32_t heapIndex = 0; heapIndex &lt; <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#ad4c301c65674b825666cea295f3517a1">GetMemoryHeapCount</a>(); ++heapIndex)</div>
<div class="line"><span class="lineno"> 1253</span>            {</div>
<div class="line"><span class="lineno"> 1254</span>                <span class="keyword">const</span> VkDeviceSize limit = pCreateInfo-&gt;pHeapSizeLimit[heapIndex];</div>
<div class="line"><span class="lineno"> 1255</span>                <span class="keywordflow">if</span> (limit != VK_WHOLE_SIZE)</div>
<div class="line"><span class="lineno"> 1256</span>                {</div>
<div class="line"><span class="lineno"> 1257</span>                    <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a>[heapIndex] = limit;</div>
<div class="line"><span class="lineno"> 1258</span>                    <span class="keywordflow">if</span> (limit &lt; <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryHeaps[heapIndex].size)</div>
<div class="line"><span class="lineno"> 1259</span>                    {</div>
<div class="line"><span class="lineno"> 1260</span>                        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryHeaps[heapIndex].size = limit;</div>
<div class="line"><span class="lineno"> 1261</span>                    }</div>
<div class="line"><span class="lineno"> 1262</span>                }</div>
<div class="line"><span class="lineno"> 1263</span>            }</div>
<div class="line"><span class="lineno"> 1264</span>        }</div>
<div class="line"><span class="lineno"> 1265</span> </div>
<div class="line"><span class="lineno"> 1266</span> </div>
<div class="line"><span class="lineno"> 1267</span> </div>
<div class="line"><span class="lineno"> 1268</span>        <span class="keywordflow">for</span> (uint32_t memTypeIndex = 0; memTypeIndex &lt; <a class="code hl_define" href="_allocator_vk_8h.html#a5d4d83a94756f6322f007d7efefd15e7">VK_MAX_MEMORY_TYPES_MIN</a>; ++memTypeIndex)</div>
<div class="line"><span class="lineno"> 1269</span>        {</div>
<div class="line"><span class="lineno"> 1270</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1271</span><span class="comment">            const VkDeviceSize preferredBlockSize = CalcPreferredBlockSize(memTypeIndex);</span></div>
<div class="line"><span class="lineno"> 1272</span><span class="comment">            m_pBlockVectors[memTypeIndex] = vma_new(this, VmaBlockVector)(</span></div>
<div class="line"><span class="lineno"> 1273</span><span class="comment">                this,</span></div>
<div class="line"><span class="lineno"> 1274</span><span class="comment">                memTypeIndex,</span></div>
<div class="line"><span class="lineno"> 1275</span><span class="comment">                preferredBlockSize,</span></div>
<div class="line"><span class="lineno"> 1276</span><span class="comment">                0,</span></div>
<div class="line"><span class="lineno"> 1277</span><span class="comment">                SIZE_MAX,</span></div>
<div class="line"><span class="lineno"> 1278</span><span class="comment">                GetBufferImageGranularity(),</span></div>
<div class="line"><span class="lineno"> 1279</span><span class="comment">                pCreateInfo-&gt;frameInUseCount,</span></div>
<div class="line"><span class="lineno"> 1280</span><span class="comment">                false, // isCustomPool</span></div>
<div class="line"><span class="lineno"> 1281</span><span class="comment">                false, // explicitBlockSize</span></div>
<div class="line"><span class="lineno"> 1282</span><span class="comment">                false); // linearAlgorithm</span></div>
<div class="line"><span class="lineno"> 1283</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno"> 1284</span>            <span class="comment">// No need to call m_pBlockVectors[memTypeIndex][blockVectorTypeIndex]-&gt;CreateMinBlocks here,</span></div>
<div class="line"><span class="lineno"> 1285</span>            <span class="comment">// becase minBlockCount is 0.</span></div>
<div class="line"><span class="lineno"> 1286</span>            <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a1c10650c8d62bf794fec91e8229ca8d9">m_pDedicatedAllocations</a>[memTypeIndex] = <a class="code hl_typedef" href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">AllocMapTy</a>();</div>
<div class="line"><span class="lineno"> 1287</span>        }</div>
<div class="line"><span class="lineno"> 1288</span>    }</div>
<div class="ttc" id="a_allocator_vk_8h_html_a5d4d83a94756f6322f007d7efefd15e7"><div class="ttname"><a href="_allocator_vk_8h.html#a5d4d83a94756f6322f007d7efefd15e7">VK_MAX_MEMORY_TYPES_MIN</a></div><div class="ttdeci">#define VK_MAX_MEMORY_TYPES_MIN</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00410">AllocatorVk.h:410</a></div></div>
<div class="ttc" id="a_allocator_vk_8h_html_a99d48e5e4c73610e657f431f4129663a"><div class="ttname"><a href="_allocator_vk_8h.html#a99d48e5e4c73610e657f431f4129663a">VK_MAX_MEMORY_HEAPS_MIN</a></div><div class="ttdeci">#define VK_MAX_MEMORY_HEAPS_MIN</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00411">AllocatorVk.h:411</a></div></div>
<div class="ttc" id="a_allocator_vk_8h_html_a9eeba9a7f616ef65648e404525111e30"><div class="ttname"><a href="_allocator_vk_8h.html#a9eeba9a7f616ef65648e404525111e30">_DEFAULT_LARGE_HEAP_BLOCK_SIZE</a></div><div class="ttdeci">#define _DEFAULT_LARGE_HEAP_BLOCK_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00721">AllocatorVk.h:721</a></div></div>
<div class="ttc" id="a_allocator_vk_8h_html_aa763a869736c3d2a758daa234aeeb19a"><div class="ttname"><a href="_allocator_vk_8h.html#aa763a869736c3d2a758daa234aeeb19a">_DEBUG_DETECT_CORRUPTION</a></div><div class="ttdeci">#define _DEBUG_DETECT_CORRUPTION</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00717">AllocatorVk.h:717</a></div></div>
<div class="ttc" id="a_allocator_vk_8h_html_aaba51e4043fa15d543352c870cecf754"><div class="ttname"><a href="_allocator_vk_8h.html#aaba51e4043fa15d543352c870cecf754">_DEBUG_MARGIN</a></div><div class="ttdeci">#define _DEBUG_MARGIN</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00715">AllocatorVk.h:715</a></div></div>
<div class="ttc" id="anamespacevkmm_html_ad8c018725e18ffbcf0ce02abd261e770a8750b68b276e80e7dd3f828349f8fa22"><div class="ttname"><a href="namespacevkmm.html#ad8c018725e18ffbcf0ce02abd261e770a8750b68b276e80e7dd3f828349f8fa22">vkmm::ALLOCATOR_CREATE_EXTERNALLY_SYNCHRONIZED_BIT</a></div><div class="ttdeci">@ ALLOCATOR_CREATE_EXTERNALLY_SYNCHRONIZED_BIT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00543">AllocatorVk.h:543</a></div></div>
<div class="ttc" id="anamespacevkmm_html_ad8c018725e18ffbcf0ce02abd261e770ae12701fc3af67343c6f6ad5eec40ea53"><div class="ttname"><a href="namespacevkmm.html#ad8c018725e18ffbcf0ce02abd261e770ae12701fc3af67343c6f6ad5eec40ea53">vkmm::ALLOCATOR_CREATE_KHR_DEDICATED_ALLOCATION_BIT</a></div><div class="ttdeci">@ ALLOCATOR_CREATE_KHR_DEDICATED_ALLOCATION_BIT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00545">AllocatorVk.h:545</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a012a58a37d959ab717ec7ee5cbbd35b1"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a012a58a37d959ab717ec7ee5cbbd35b1">vkmm::Allocator_T::m_AllocationCallbacksSpecified</a></div><div class="ttdeci">bool m_AllocationCallbacksSpecified</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00917">AllocatorVk.h:917</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a0fbf088e770a2ea8a42b4b421fb928a9"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">vkmm::Allocator_T::m_MemProps</a></div><div class="ttdeci">VkPhysicalDeviceMemoryProperties m_MemProps</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00926">AllocatorVk.h:926</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a1c10650c8d62bf794fec91e8229ca8d9"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a1c10650c8d62bf794fec91e8229ca8d9">vkmm::Allocator_T::m_pDedicatedAllocations</a></div><div class="ttdeci">AllocMapMapTy m_pDedicatedAllocations</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00936">AllocatorVk.h:936</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a27ded6e6d2732ed51a306f0fd57266a6"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a27ded6e6d2732ed51a306f0fd57266a6">vkmm::Allocator_T::m_NextPoolId</a></div><div class="ttdeci">uint32_t m_NextPoolId</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l01069">AllocatorVk.h:1069</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a2c0d6ad490b2b9b07143a92f27b1adf5"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">vkmm::Allocator_T::m_HeapSizeLimit</a></div><div class="ttdeci">VkDeviceSize m_HeapSizeLimit[VK_MAX_MEMORY_HEAPS_MIN]</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00922">AllocatorVk.h:922</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a51507d8e15e667518e7feced00deb9da"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a51507d8e15e667518e7feced00deb9da">vkmm::Allocator_T::slim</a></div><div class="ttdeci">SRWLOCK slim</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00912">AllocatorVk.h:912</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a51ad577328dd317548b1f480420808ad"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a51ad577328dd317548b1f480420808ad">vkmm::Allocator_T::m_PhysicalDevice</a></div><div class="ttdeci">VkPhysicalDevice m_PhysicalDevice</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l01063">AllocatorVk.h:1063</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a6babc882fdedd2f2964af42bb0f631a0"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a6babc882fdedd2f2964af42bb0f631a0">vkmm::Allocator_T::m_Pools</a></div><div class="ttdeci">VkmmVector&lt; Pool, StlAllocator&lt; Pool &gt; &gt; m_Pools</div><div class="ttdoc">COM VMA_MUTEX m_PoolsMutex;.</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l01068">AllocatorVk.h:1068</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a700bb5300d8388aa37c21f3f14fcff50"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">vkmm::Allocator_T::m_hDevice</a></div><div class="ttdeci">VkDevice m_hDevice</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00916">AllocatorVk.h:916</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a78da199465312609d018c4a639b419e5"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a78da199465312609d018c4a639b419e5">vkmm::Allocator_T::m_AllocationCallbacks</a></div><div class="ttdeci">VkAllocationCallbacks m_AllocationCallbacks</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00918">AllocatorVk.h:918</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a7a05d50e9cd40c257fd613c54d4adda2"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a7a05d50e9cd40c257fd613c54d4adda2">vkmm::Allocator_T::GetAllocationCallbacks</a></div><div class="ttdeci">const VkAllocationCallbacks * GetAllocationCallbacks() const</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00944">AllocatorVk.h:944</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a89bc733d7c57eca0df546f31c166919f"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a89bc733d7c57eca0df546f31c166919f">vkmm::Allocator_T::m_CurrentFrameIndex</a></div><div class="ttdeci">std::atomic&lt; UINT &gt; m_CurrentFrameIndex</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l01064">AllocatorVk.h:1064</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a992a462f20ad09c02d8e95739546be39"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">vkmm::Allocator_T::m_DeviceMemoryCallbacks</a></div><div class="ttdeci">DeviceMemoryCallbacks m_DeviceMemoryCallbacks</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00919">AllocatorVk.h:919</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_aa62ce8d2fa448c42f9def5045086f96a"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#aa62ce8d2fa448c42f9def5045086f96a">vkmm::Allocator_T::m_PreferredLargeHeapBlockSize</a></div><div class="ttdeci">VkDeviceSize m_PreferredLargeHeapBlockSize</div><div class="ttdoc">private:</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l01061">AllocatorVk.h:1061</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_abdd142a2e85732ac7f07577bf94a24f2"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#abdd142a2e85732ac7f07577bf94a24f2">vkmm::Allocator_T::m_UseMutex</a></div><div class="ttdeci">bool m_UseMutex</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00914">AllocatorVk.h:914</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_ad4c301c65674b825666cea295f3517a1"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#ad4c301c65674b825666cea295f3517a1">vkmm::Allocator_T::GetMemoryHeapCount</a></div><div class="ttdeci">uint32_t GetMemoryHeapCount() const</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00957">AllocatorVk.h:957</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_ad9bcdf66b4581ef5eaa375adc1b70c1a"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">vkmm::Allocator_T::m_PhysicalDeviceProperties</a></div><div class="ttdeci">VkPhysicalDeviceProperties m_PhysicalDeviceProperties</div><div class="ttdoc">COM VMA_MUTEX m_HeapSizeLimitMutex;.</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00925">AllocatorVk.h:925</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_af916e272ecb0dbea8356c26a561c1010"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#af916e272ecb0dbea8356c26a561c1010">vkmm::Allocator_T::m_UseKhrDedicatedAllocation</a></div><div class="ttdeci">bool m_UseKhrDedicatedAllocation</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00915">AllocatorVk.h:915</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_afeff925dde123dcda1561cf8a16113b2"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">vkmm::Allocator_T::AllocMapTy</a></div><div class="ttdeci">tbb::concurrent_unordered_map&lt; int, vkmm::Allocation, std::hash&lt; int &gt;, std::equal_to&lt; int &gt;, front::tbbTAllocator &gt; AllocMapTy</div><div class="ttdoc">COM VmaBlockVector* m_pBlockVectors[VK_MAX_MEMORY_TYPES];.</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00933">AllocatorVk.h:933</a></div></div>
<div class="ttc" id="astructvkmm_1_1_device_memory_callbacks_html_a54d4327cc4bce938703b92a6b01208b5"><div class="ttname"><a href="structvkmm_1_1_device_memory_callbacks.html#a54d4327cc4bce938703b92a6b01208b5">vkmm::DeviceMemoryCallbacks::pfnFree</a></div><div class="ttdeci">PFN_FreeDeviceMemoryFunction pfnFree</div><div class="ttdoc">Optional, can be null.</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00538">AllocatorVk.h:538</a></div></div>
<div class="ttc" id="astructvkmm_1_1_device_memory_callbacks_html_a99b9a21a5fee89c829e4b157765b63ae"><div class="ttname"><a href="structvkmm_1_1_device_memory_callbacks.html#a99b9a21a5fee89c829e4b157765b63ae">vkmm::DeviceMemoryCallbacks::pfnAllocate</a></div><div class="ttdeci">PFN_AllocateDeviceMemoryFunction pfnAllocate</div><div class="ttdoc">Optional, can be null.</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00536">AllocatorVk.h:536</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f0e0900ed8725944954e1e1f83ff4f4" name="a3f0e0900ed8725944954e1e1f83ff4f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f0e0900ed8725944954e1e1f83ff4f4">&#9670;&nbsp;</a></span>~Allocator_T()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vkmm::Allocator_T::~Allocator_T </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >COM assert(m_Pools.empty());</p>
<p >COM Delete(this, m_pBlockVectors[i]);</p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01297">1297</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1298</span>    {</div>
<div class="line"><span class="lineno"> 1299</span> </div>
<div class="line"><span class="lineno"> 1301</span><span class="preprocessor">#ifdef USE_HIREDIS</span></div>
<div class="line"><span class="lineno"> 1302</span>        rlog.TearDown();</div>
<div class="line"><span class="lineno"> 1303</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1304</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a8b51ad65de2321d6b1936ffb28cb0f42">GetMemoryTypeCount</a>(); i--; )</div>
<div class="line"><span class="lineno"> 1305</span>        {</div>
<div class="line"><span class="lineno"> 1306</span>            <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a1c10650c8d62bf794fec91e8229ca8d9">m_pDedicatedAllocations</a>[i].clear();</div>
<div class="line"><span class="lineno"> 1308</span>        }</div>
<div class="line"><span class="lineno"> 1309</span>       <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a1c10650c8d62bf794fec91e8229ca8d9">m_pDedicatedAllocations</a>.clear();</div>
<div class="line"><span class="lineno"> 1310</span>    }</div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a8b51ad65de2321d6b1936ffb28cb0f42"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a8b51ad65de2321d6b1936ffb28cb0f42">vkmm::Allocator_T::GetMemoryTypeCount</a></div><div class="ttdeci">uint32_t GetMemoryTypeCount() const</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00958">AllocatorVk.h:958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a73b2324c5161a848f40661e1ffb4f34b" name="a73b2324c5161a848f40661e1ffb4f34b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73b2324c5161a848f40661e1ffb4f34b">&#9670;&nbsp;</a></span>AllocateDedicatedMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::AllocateDedicatedMemory </td>
          <td>(</td>
          <td class="paramtype">VkDeviceSize&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevkmm.html#afff914a40f73475bdfc7931e145923a8">SuballocationType</a>&#160;</td>
          <td class="paramname"><em>suballocType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memTypeIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isUserDataString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvkmm_1_1_allocation_create_info.html">AllocationCreateInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>createInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkBuffer&#160;</td>
          <td class="paramname"><em>dedicatedBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkImage&#160;</td>
          <td class="paramname"><em>dedicatedImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Allocation *&#160;</td>
          <td class="paramname"><em>pAllocation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01315">1315</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1325</span>    {</div>
<div class="line"><span class="lineno"> 1326</span> </div>
<div class="line"><span class="lineno"> 1327</span>        assert(pAllocation);</div>
<div class="line"><span class="lineno"> 1328</span>        createInfo.info.memoryTypeIndex = memTypeIndex;</div>
<div class="line"><span class="lineno"> 1329</span>        <span class="keywordtype">bool</span> dedicated = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1330</span>        <span class="keywordflow">if</span> (memTypeIndex == 2 || memTypeIndex == 3 || memTypeIndex == 0) {</div>
<div class="line"><span class="lineno"> 1331</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="_memory_vk_8h.html#a3681248cab002049a231269fab84de70">HOST_VISIBLE_SINGLE_ALLO_MAX</a> &lt; size) {</div>
<div class="line"><span class="lineno"> 1332</span>                <a class="code hl_define" href="log_8hpp.html#a0a8f190cbf66caba9750b487aa06d7f3">log_bad</a>(<span class="stringliteral">&quot;memory out of range \n&quot;</span>);</div>
<div class="line"><span class="lineno"> 1333</span>            }</div>
<div class="line"><span class="lineno"> 1334</span>        }</div>
<div class="line"><span class="lineno"> 1335</span> </div>
<div class="line"><span class="lineno"> 1336</span>        <span class="keywordflow">if</span>(dedicated) {</div>
<div class="line"><span class="lineno"> 1337</span>                createInfo.info.allocationSize = size;</div>
<div class="line"><span class="lineno"> 1338</span><span class="preprocessor">#if DEDICATED_ALLOCATION</span></div>
<div class="line"><span class="lineno"> 1339</span>                VkMemoryDedicatedAllocateInfo* dedicatedAllocInfo = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1340</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#af916e272ecb0dbea8356c26a561c1010">m_UseKhrDedicatedAllocation</a>)</div>
<div class="line"><span class="lineno"> 1341</span>                {</div>
<div class="line"><span class="lineno"> 1342</span>                    createInfo.info.append(dedicatedAllocInfo);</div>
<div class="line"><span class="lineno"> 1343</span>                    <span class="keywordflow">if</span> (dedicatedBuffer != VK_NULL_HANDLE)</div>
<div class="line"><span class="lineno"> 1344</span>                    {</div>
<div class="line"><span class="lineno"> 1345</span>                        assert(dedicatedImage == VK_NULL_HANDLE);</div>
<div class="line"><span class="lineno"> 1346</span>                        dedicatedAllocInfo-&gt;buffer = dedicatedBuffer;</div>
<div class="line"><span class="lineno"> 1347</span>                    }</div>
<div class="line"><span class="lineno"> 1348</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dedicatedImage != VK_NULL_HANDLE)</div>
<div class="line"><span class="lineno"> 1349</span>                    {</div>
<div class="line"><span class="lineno"> 1350</span>                        dedicatedAllocInfo-&gt;image = dedicatedImage;</div>
<div class="line"><span class="lineno"> 1351</span>                    }</div>
<div class="line"><span class="lineno"> 1352</span>                }</div>
<div class="line"><span class="lineno"> 1353</span><span class="preprocessor">#endif </span><span class="comment">// #if VMA_DEDICATED_ALLOCATION</span></div>
<div class="line"><span class="lineno"> 1354</span>                <span class="comment">// Allocate VkDeviceMemory.</span></div>
<div class="line"><span class="lineno"> 1355</span>                VkDeviceMemory hMemory = VK_NULL_HANDLE;</div>
<div class="line"><span class="lineno"> 1356</span>                VkResult res = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a147f01e5aeea587b8bb9e8a6566da437">AllocateVulkanMemory</a>((VkMemoryAllocateInfo*)&amp;createInfo.info, &amp;hMemory);</div>
<div class="line"><span class="lineno"> 1357</span>                <span class="keywordflow">if</span> (res &lt; 0)</div>
<div class="line"><span class="lineno"> 1358</span>                {</div>
<div class="line"><span class="lineno"> 1359</span>                    <a class="code hl_define" href="_allocator_vk_8h.html#a89f74447d93eb33a3479eae10018246e">VKMM_DEBUG_LOG</a>(<span class="stringliteral">&quot;    vkAllocateMemory FAILED&quot;</span>);</div>
<div class="line"><span class="lineno"> 1360</span>                    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1361</span>                }</div>
<div class="line"><span class="lineno"> 1362</span> </div>
<div class="line"><span class="lineno"> 1363</span>                <span class="keywordtype">void</span>* pMappedData = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1364</span>                <span class="keywordflow">if</span> (map)</div>
<div class="line"><span class="lineno"> 1365</span>                {</div>
<div class="line"><span class="lineno"> 1366</span>                    res = vkMapMemory(</div>
<div class="line"><span class="lineno"> 1367</span>                        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>,</div>
<div class="line"><span class="lineno"> 1368</span>                        hMemory,</div>
<div class="line"><span class="lineno"> 1369</span>                        0,</div>
<div class="line"><span class="lineno"> 1370</span>                        VK_WHOLE_SIZE,</div>
<div class="line"><span class="lineno"> 1371</span>                        0,</div>
<div class="line"><span class="lineno"> 1372</span>                        &amp;pMappedData);</div>
<div class="line"><span class="lineno"> 1373</span>                    <span class="keywordflow">if</span> (res &lt; 0)</div>
<div class="line"><span class="lineno"> 1374</span>                    {</div>
<div class="line"><span class="lineno"> 1375</span>                        <a class="code hl_define" href="_allocator_vk_8h.html#a89f74447d93eb33a3479eae10018246e">VKMM_DEBUG_LOG</a>(<span class="stringliteral">&quot;    vkMapMemory FAILED&quot;</span>);</div>
<div class="line"><span class="lineno"> 1376</span>                        <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#ade3a9d1e99c19b97d1c5e6697ab27172">FreeVulkanMemory</a>(memTypeIndex, size, hMemory);</div>
<div class="line"><span class="lineno"> 1377</span>                        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1378</span>                    }</div>
<div class="line"><span class="lineno"> 1379</span>                }</div>
<div class="line"><span class="lineno"> 1380</span> </div>
<div class="line"><span class="lineno"> 1381</span>                *pAllocation = <a class="code hl_define" href="_allocator_vk_8h.html#afdb8aefb800b4641cf112022447540ce">vkmm_new</a>(<span class="keyword">this</span>, Allocation_T)(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a89bc733d7c57eca0df546f31c166919f">m_CurrentFrameIndex</a>.load(), isUserDataString);</div>
<div class="line"><span class="lineno"> 1382</span>                (*pAllocation)-&gt;InitDedicatedAllocation(memTypeIndex, hMemory, suballocType, pMappedData, size);</div>
<div class="line"><span class="lineno"> 1383</span>        }</div>
<div class="line"><span class="lineno"> 1384</span> </div>
<div class="line"><span class="lineno"> 1385</span> </div>
<div class="line"><span class="lineno"> 1386</span>        strcpy((*pAllocation)-&gt;name, createInfo.name);</div>
<div class="line"><span class="lineno"> 1387</span> </div>
<div class="line"><span class="lineno"> 1388</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="_allocator_vk_8h.html#a15ab30873a4a160165dccb50a7f39254">_DEBUG_INITIALIZE_ALLOCATIONS</a>)</div>
<div class="line"><span class="lineno"> 1389</span>        {</div>
<div class="line"><span class="lineno"> 1390</span>            <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a1a9db38a13a0fdce122fa65d3afc78bc">FillAllocation</a>(*pAllocation, ALLOCATION_FILL_PATTERN_CREATED);</div>
<div class="line"><span class="lineno"> 1391</span>        }</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>        {</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>            <a class="code hl_define" href="_context1_vk_8h.html#a94e46499e7b49aa264b7ad65c754b972">GetCTX</a>($ctx)</div>
<div class="line"><span class="lineno"> 1396</span>                $ctx-&gt;deb.setObjectName(dedicatedBuffer, createInfo.name);</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>            <a class="code hl_typedef" href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">AllocMapTy</a>  pDedicatedAllocations = <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a1c10650c8d62bf794fec91e8229ca8d9">m_pDedicatedAllocations</a>[memTypeIndex];</div>
<div class="line"><span class="lineno"> 1399</span>            pDedicatedAllocations[(*pAllocation)-&gt;ID] = (*pAllocation);</div>
<div class="line"><span class="lineno"> 1400</span>        }</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>        <a class="code hl_define" href="_allocator_vk_8h.html#a89f74447d93eb33a3479eae10018246e">VKMM_DEBUG_LOG</a>(<span class="stringliteral">&quot;    Allocated DedicatedMemory MemoryTypeIndex=#%u&quot;</span>, memTypeIndex);</div>
<div class="line"><span class="lineno"> 1403</span> </div>
<div class="line"><span class="lineno"> 1404</span>        <span class="keywordflow">return</span> VK_SUCCESS;</div>
<div class="line"><span class="lineno"> 1405</span>    }</div>
<div class="ttc" id="a_allocator_vk_8h_html_a15ab30873a4a160165dccb50a7f39254"><div class="ttname"><a href="_allocator_vk_8h.html#a15ab30873a4a160165dccb50a7f39254">_DEBUG_INITIALIZE_ALLOCATIONS</a></div><div class="ttdeci">#define _DEBUG_INITIALIZE_ALLOCATIONS</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00716">AllocatorVk.h:716</a></div></div>
<div class="ttc" id="a_allocator_vk_8h_html_a89f74447d93eb33a3479eae10018246e"><div class="ttname"><a href="_allocator_vk_8h.html#a89f74447d93eb33a3479eae10018246e">VKMM_DEBUG_LOG</a></div><div class="ttdeci">#define VKMM_DEBUG_LOG(...)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00712">AllocatorVk.h:712</a></div></div>
<div class="ttc" id="a_allocator_vk_8h_html_afdb8aefb800b4641cf112022447540ce"><div class="ttname"><a href="_allocator_vk_8h.html#afdb8aefb800b4641cf112022447540ce">vkmm_new</a></div><div class="ttdeci">#define vkmm_new(allocator, type)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00813">AllocatorVk.h:813</a></div></div>
<div class="ttc" id="a_context1_vk_8h_html_a94e46499e7b49aa264b7ad65c754b972"><div class="ttname"><a href="_context1_vk_8h.html#a94e46499e7b49aa264b7ad65c754b972">GetCTX</a></div><div class="ttdeci">#define GetCTX(c)</div><div class="ttdef"><b>Definition:</b> <a href="_context1_vk_8h_source.html#l00045">Context1Vk.h:45</a></div></div>
<div class="ttc" id="a_memory_vk_8h_html_a3681248cab002049a231269fab84de70"><div class="ttname"><a href="_memory_vk_8h.html#a3681248cab002049a231269fab84de70">HOST_VISIBLE_SINGLE_ALLO_MAX</a></div><div class="ttdeci">#define HOST_VISIBLE_SINGLE_ALLO_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_memory_vk_8h_source.html#l00010">MemoryVk.h:10</a></div></div>
<div class="ttc" id="alog_8hpp_html_a0a8f190cbf66caba9750b487aa06d7f3"><div class="ttname"><a href="log_8hpp.html#a0a8f190cbf66caba9750b487aa06d7f3">log_bad</a></div><div class="ttdeci">#define log_bad(...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00037">log.hpp:37</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a147f01e5aeea587b8bb9e8a6566da437"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a147f01e5aeea587b8bb9e8a6566da437">vkmm::Allocator_T::AllocateVulkanMemory</a></div><div class="ttdeci">VkResult AllocateVulkanMemory(VkMemoryAllocateInfo *pAllocateInfo, VkDeviceMemory *pMemory)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l01074">AllocatorVk.cpp:1074</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a1a9db38a13a0fdce122fa65d3afc78bc"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a1a9db38a13a0fdce122fa65d3afc78bc">vkmm::Allocator_T::FillAllocation</a></div><div class="ttdeci">void FillAllocation(const Allocation hAllocation, uint8_t pattern)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l00628">AllocatorVk.cpp:628</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_ade3a9d1e99c19b97d1c5e6697ab27172"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#ade3a9d1e99c19b97d1c5e6697ab27172">vkmm::Allocator_T::FreeVulkanMemory</a></div><div class="ttdeci">void FreeVulkanMemory(uint32_t memoryType, VkDeviceSize size, VkDeviceMemory hMemory)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l01057">AllocatorVk.cpp:1057</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5b5f286ec2c4bfa90a9ad944803dfb70" name="a5b5f286ec2c4bfa90a9ad944803dfb70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b5f286ec2c4bfa90a9ad944803dfb70">&#9670;&nbsp;</a></span>AllocateMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::AllocateMemory </td>
          <td>(</td>
          <td class="paramtype">const VkMemoryRequirements &amp;&#160;</td>
          <td class="paramname"><em>vkMemReq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>requiresDedicatedAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>prefersDedicatedAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkBuffer&#160;</td>
          <td class="paramname"><em>dedicatedBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkImage&#160;</td>
          <td class="paramname"><em>dedicatedImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvkmm_1_1_allocation_create_info.html">AllocationCreateInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>createInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevkmm.html#afff914a40f73475bdfc7931e145923a8">SuballocationType</a>&#160;</td>
          <td class="paramname"><em>suballocType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Allocation *&#160;</td>
          <td class="paramname"><em>pAllocation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01525">1525</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1534</span>    {</div>
<div class="line"><span class="lineno"> 1535</span>        <span class="keywordflow">if</span> ((createInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6afb48a3c7d5babbfd6216c1d3759d1254">ALLOCATION_CREATE_DEDICATED_MEMORY_BIT</a>) != 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1536</span>            (createInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a989c58c950dd41358c6ea0544c362d93">ALLOCATION_CREATE_NEVER_ALLOCATE_BIT</a>) != 0)</div>
<div class="line"><span class="lineno"> 1537</span>        {</div>
<div class="line"><span class="lineno"> 1538</span>            assert(0 &amp;&amp; <span class="stringliteral">&quot;Specifying VMA_ALLOCATION_CREATE_DEDICATED_MEMORY_BIT together with VMA_ALLOCATION_CREATE_NEVER_ALLOCATE_BIT makes no sense.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1539</span>            <span class="keywordflow">return</span> VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1540</span>        }</div>
<div class="line"><span class="lineno"> 1541</span>        <span class="keywordflow">if</span> ((createInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a506eb061d833063d33b5b27f47c2185c">ALLOCATION_CREATE_MAPPED_BIT</a>) != 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1542</span>            (createInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a93a81a6d4737180a944f32d3debb9115">ALLOCATION_CREATE_CAN_BECOME_LOST_BIT</a>) != 0)</div>
<div class="line"><span class="lineno"> 1543</span>        {</div>
<div class="line"><span class="lineno"> 1544</span>            assert(0 &amp;&amp; <span class="stringliteral">&quot;Specifying VMA_ALLOCATION_CREATE_MAPPED_BIT together with VMA_ALLOCATION_CREATE_CAN_BECOME_LOST_BIT is invalid.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1545</span>            <span class="keywordflow">return</span> VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1546</span>        }</div>
<div class="line"><span class="lineno"> 1547</span> </div>
<div class="line"><span class="lineno"> 1548</span>        <span class="keywordflow">if</span> (requiresDedicatedAllocation)</div>
<div class="line"><span class="lineno"> 1549</span>        {</div>
<div class="line"><span class="lineno"> 1550</span>            <span class="keywordflow">if</span> ((createInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a989c58c950dd41358c6ea0544c362d93">ALLOCATION_CREATE_NEVER_ALLOCATE_BIT</a>) != 0)</div>
<div class="line"><span class="lineno"> 1551</span>            {</div>
<div class="line"><span class="lineno"> 1552</span>                assert(0 &amp;&amp; <span class="stringliteral">&quot;VMA_ALLOCATION_CREATE_NEVER_ALLOCATE_BIT specified while dedicated allocation is required.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1553</span>                <span class="keywordflow">return</span> VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1554</span>            }</div>
<div class="line"><span class="lineno"> 1555</span>            <span class="keywordflow">if</span> (createInfo.pool != VK_NULL_HANDLE)</div>
<div class="line"><span class="lineno"> 1556</span>            {</div>
<div class="line"><span class="lineno"> 1557</span>                assert(0 &amp;&amp; <span class="stringliteral">&quot;Pool specified while dedicated allocation is required.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1558</span>                <span class="keywordflow">return</span> VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1559</span>            }</div>
<div class="line"><span class="lineno"> 1560</span>        }</div>
<div class="line"><span class="lineno"> 1561</span> </div>
<div class="line"><span class="lineno"> 1562</span>        <span class="keywordflow">if</span> ((createInfo.pool != VK_NULL_HANDLE) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1563</span>            ((createInfo.flags &amp; (<a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6afb48a3c7d5babbfd6216c1d3759d1254">ALLOCATION_CREATE_DEDICATED_MEMORY_BIT</a>)) != 0))</div>
<div class="line"><span class="lineno"> 1564</span>        {</div>
<div class="line"><span class="lineno"> 1565</span>            assert(0 &amp;&amp; <span class="stringliteral">&quot;Specifying VMA_ALLOCATION_CREATE_DEDICATED_MEMORY_BIT when pool != null is invalid.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1566</span>            <span class="keywordflow">return</span> VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1567</span>        }</div>
<div class="line"><span class="lineno"> 1568</span> </div>
<div class="line"><span class="lineno"> 1569</span>        <span class="keywordflow">if</span> (createInfo.pool != VK_NULL_HANDLE)</div>
<div class="line"><span class="lineno"> 1570</span>        {</div>
<div class="line"><span class="lineno"> 1571</span>            <span class="comment">/*/// COM</span></div>
<div class="line"><span class="lineno"> 1572</span><span class="comment">            const VkDeviceSize alignmentForPool = __max(</span></div>
<div class="line"><span class="lineno"> 1573</span><span class="comment">                vkMemReq.alignment,</span></div>
<div class="line"><span class="lineno"> 1574</span><span class="comment">                GetMemoryTypeMinAlignment(createInfo.pool-&gt;m_BlockVector.GetMemoryTypeIndex()));</span></div>
<div class="line"><span class="lineno"> 1575</span><span class="comment">            return createInfo.pool-&gt;m_BlockVector.Allocate(</span></div>
<div class="line"><span class="lineno"> 1576</span><span class="comment">                createInfo.pool,</span></div>
<div class="line"><span class="lineno"> 1577</span><span class="comment">                m_CurrentFrameIndex.load(),</span></div>
<div class="line"><span class="lineno"> 1578</span><span class="comment">                vkMemReq.size,</span></div>
<div class="line"><span class="lineno"> 1579</span><span class="comment">                alignmentForPool,</span></div>
<div class="line"><span class="lineno"> 1580</span><span class="comment">                createInfo,</span></div>
<div class="line"><span class="lineno"> 1581</span><span class="comment">                suballocType,</span></div>
<div class="line"><span class="lineno"> 1582</span><span class="comment">                pAllocation);</span></div>
<div class="line"><span class="lineno"> 1583</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno"> 1584</span>        }</div>
<div class="line"><span class="lineno"> 1585</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1586</span>        {</div>
<div class="line"><span class="lineno"> 1587</span>            <span class="comment">// Bit mask of memory Vulkan types acceptable for this allocation.</span></div>
<div class="line"><span class="lineno"> 1588</span>            uint32_t memoryTypeBits = vkMemReq.memoryTypeBits;</div>
<div class="line"><span class="lineno"> 1589</span>            uint32_t memTypeIndex = UINT32_MAX;</div>
<div class="line"><span class="lineno"> 1590</span>            VkResult res = <a class="code hl_function" href="namespacevkmm.html#a88bab7c15b57c286862e9f8d031c82b8">FindMemoryTypeIndex</a>(<span class="keyword">this</span>, memoryTypeBits, &amp;createInfo, &amp;memTypeIndex);</div>
<div class="line"><span class="lineno"> 1591</span>            </div>
<div class="line"><span class="lineno"> 1592</span>            <span class="keywordflow">if</span> (res == VK_SUCCESS)</div>
<div class="line"><span class="lineno"> 1593</span>            {</div>
<div class="line"><span class="lineno"> 1594</span>                VkDeviceSize alignmentForMemType = __max(</div>
<div class="line"><span class="lineno"> 1595</span>                    vkMemReq.alignment,</div>
<div class="line"><span class="lineno"> 1596</span>                    <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#ac6581a3e9a38f05c0d8525937e049dfb">GetMemoryTypeMinAlignment</a>(memTypeIndex));</div>
<div class="line"><span class="lineno"> 1597</span> </div>
<div class="line"><span class="lineno"> 1598</span>                res = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#aa766c3a5857919710629c25d66ab6141">AllocateMemoryOfType</a>(</div>
<div class="line"><span class="lineno"> 1599</span>                    vkMemReq.size,</div>
<div class="line"><span class="lineno"> 1600</span>                    alignmentForMemType,</div>
<div class="line"><span class="lineno"> 1601</span>                    requiresDedicatedAllocation || prefersDedicatedAllocation,</div>
<div class="line"><span class="lineno"> 1602</span>                    dedicatedBuffer,</div>
<div class="line"><span class="lineno"> 1603</span>                    dedicatedImage,</div>
<div class="line"><span class="lineno"> 1604</span>                    createInfo,</div>
<div class="line"><span class="lineno"> 1605</span>                    memTypeIndex,</div>
<div class="line"><span class="lineno"> 1606</span>                    suballocType,</div>
<div class="line"><span class="lineno"> 1607</span>                    pAllocation);</div>
<div class="line"><span class="lineno"> 1608</span>                <span class="comment">// Succeeded on first try.</span></div>
<div class="line"><span class="lineno"> 1609</span>                <span class="keywordflow">if</span> (res == VK_SUCCESS)</div>
<div class="line"><span class="lineno"> 1610</span>                {</div>
<div class="line"><span class="lineno"> 1611</span>                    <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1612</span>                }</div>
<div class="line"><span class="lineno"> 1613</span>                <span class="comment">// Allocation from this memory type failed. Try other compatible memory types.</span></div>
<div class="line"><span class="lineno"> 1614</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1615</span>                {</div>
<div class="line"><span class="lineno"> 1616</span>                    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><span class="lineno"> 1617</span>                    {</div>
<div class="line"><span class="lineno"> 1618</span>                        <span class="comment">// Remove old memTypeIndex from list of possibilities.</span></div>
<div class="line"><span class="lineno"> 1619</span>                        memoryTypeBits &amp;= ~(1u &lt;&lt; memTypeIndex);</div>
<div class="line"><span class="lineno"> 1620</span>                        <span class="comment">// Find alternative memTypeIndex.</span></div>
<div class="line"><span class="lineno"> 1621</span>                        res = <a class="code hl_function" href="namespacevkmm.html#a88bab7c15b57c286862e9f8d031c82b8">FindMemoryTypeIndex</a>(<span class="keyword">this</span>, memoryTypeBits, &amp;createInfo, &amp;memTypeIndex);</div>
<div class="line"><span class="lineno"> 1622</span>                        <span class="keywordflow">if</span> (res == VK_SUCCESS)</div>
<div class="line"><span class="lineno"> 1623</span>                        {</div>
<div class="line"><span class="lineno"> 1624</span>                            alignmentForMemType = __max(</div>
<div class="line"><span class="lineno"> 1625</span>                                vkMemReq.alignment,</div>
<div class="line"><span class="lineno"> 1626</span>                                <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#ac6581a3e9a38f05c0d8525937e049dfb">GetMemoryTypeMinAlignment</a>(memTypeIndex));</div>
<div class="line"><span class="lineno"> 1627</span> </div>
<div class="line"><span class="lineno"> 1628</span>                            res = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#aa766c3a5857919710629c25d66ab6141">AllocateMemoryOfType</a>(</div>
<div class="line"><span class="lineno"> 1629</span>                                vkMemReq.size,</div>
<div class="line"><span class="lineno"> 1630</span>                                alignmentForMemType,</div>
<div class="line"><span class="lineno"> 1631</span>                                requiresDedicatedAllocation || prefersDedicatedAllocation,</div>
<div class="line"><span class="lineno"> 1632</span>                                dedicatedBuffer,</div>
<div class="line"><span class="lineno"> 1633</span>                                dedicatedImage,</div>
<div class="line"><span class="lineno"> 1634</span>                                createInfo,</div>
<div class="line"><span class="lineno"> 1635</span>                                memTypeIndex,</div>
<div class="line"><span class="lineno"> 1636</span>                                suballocType,</div>
<div class="line"><span class="lineno"> 1637</span>                                pAllocation);</div>
<div class="line"><span class="lineno"> 1638</span>                            <span class="comment">// Allocation from this alternative memory type succeeded.</span></div>
<div class="line"><span class="lineno"> 1639</span>                            <span class="keywordflow">if</span> (res == VK_SUCCESS)</div>
<div class="line"><span class="lineno"> 1640</span>                            {</div>
<div class="line"><span class="lineno"> 1641</span>                                <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1642</span>                            }</div>
<div class="line"><span class="lineno"> 1643</span>                            <span class="comment">// else: Allocation from this memory type failed. Try next one - next loop iteration.</span></div>
<div class="line"><span class="lineno"> 1644</span>                        }</div>
<div class="line"><span class="lineno"> 1645</span>                        <span class="comment">// No other matching memory type index could be found.</span></div>
<div class="line"><span class="lineno"> 1646</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1647</span>                        {</div>
<div class="line"><span class="lineno"> 1648</span>                            <span class="comment">// Not returning res, which is VK_ERROR_FEATURE_NOT_PRESENT, because we already failed to allocate once.</span></div>
<div class="line"><span class="lineno"> 1649</span>                            <span class="keywordflow">return</span> VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1650</span>                        }</div>
<div class="line"><span class="lineno"> 1651</span>                    }</div>
<div class="line"><span class="lineno"> 1652</span>                }</div>
<div class="line"><span class="lineno"> 1653</span>            }</div>
<div class="line"><span class="lineno"> 1654</span>            <span class="comment">// Can&#39;t find any single memory type maching requirements. res is VK_ERROR_FEATURE_NOT_PRESENT.</span></div>
<div class="line"><span class="lineno"> 1655</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1656</span>                <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1657</span>        }</div>
<div class="line"><span class="lineno"> 1658</span>        assert(0);</div>
<div class="line"><span class="lineno"> 1659</span>        <span class="keywordflow">return</span> (VkResult)0;</div>
<div class="line"><span class="lineno"> 1660</span>    }</div>
<div class="ttc" id="anamespacevkmm_html_a3f0ebe38415be25c21d99ce603190ff6a506eb061d833063d33b5b27f47c2185c"><div class="ttname"><a href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a506eb061d833063d33b5b27f47c2185c">vkmm::ALLOCATION_CREATE_MAPPED_BIT</a></div><div class="ttdeci">@ ALLOCATION_CREATE_MAPPED_BIT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00613">AllocatorVk.h:613</a></div></div>
<div class="ttc" id="anamespacevkmm_html_a3f0ebe38415be25c21d99ce603190ff6a93a81a6d4737180a944f32d3debb9115"><div class="ttname"><a href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a93a81a6d4737180a944f32d3debb9115">vkmm::ALLOCATION_CREATE_CAN_BECOME_LOST_BIT</a></div><div class="ttdeci">@ ALLOCATION_CREATE_CAN_BECOME_LOST_BIT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00615">AllocatorVk.h:615</a></div></div>
<div class="ttc" id="anamespacevkmm_html_a3f0ebe38415be25c21d99ce603190ff6a989c58c950dd41358c6ea0544c362d93"><div class="ttname"><a href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a989c58c950dd41358c6ea0544c362d93">vkmm::ALLOCATION_CREATE_NEVER_ALLOCATE_BIT</a></div><div class="ttdeci">@ ALLOCATION_CREATE_NEVER_ALLOCATE_BIT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00611">AllocatorVk.h:611</a></div></div>
<div class="ttc" id="anamespacevkmm_html_a3f0ebe38415be25c21d99ce603190ff6afb48a3c7d5babbfd6216c1d3759d1254"><div class="ttname"><a href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6afb48a3c7d5babbfd6216c1d3759d1254">vkmm::ALLOCATION_CREATE_DEDICATED_MEMORY_BIT</a></div><div class="ttdeci">@ ALLOCATION_CREATE_DEDICATED_MEMORY_BIT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00609">AllocatorVk.h:609</a></div></div>
<div class="ttc" id="anamespacevkmm_html_a88bab7c15b57c286862e9f8d031c82b8"><div class="ttname"><a href="namespacevkmm.html#a88bab7c15b57c286862e9f8d031c82b8">vkmm::FindMemoryTypeIndex</a></div><div class="ttdeci">VkResult FindMemoryTypeIndex(Allocator allocator, uint32_t memoryTypeBits, AllocationCreateInfo *pAllocationCreateInfo, uint32_t *pMemoryTypeIndex)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l00425">AllocatorVk.cpp:425</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_aa766c3a5857919710629c25d66ab6141"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#aa766c3a5857919710629c25d66ab6141">vkmm::Allocator_T::AllocateMemoryOfType</a></div><div class="ttdeci">VkResult AllocateMemoryOfType(VkDeviceSize size, VkDeviceSize alignment, bool dedicatedAllocation, VkBuffer dedicatedBuffer, VkImage dedicatedImage, AllocationCreateInfo &amp;createInfo, uint32_t memTypeIndex, SuballocationType suballocType, Allocation *pAllocation)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l01407">AllocatorVk.cpp:1407</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_ac6581a3e9a38f05c0d8525937e049dfb"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#ac6581a3e9a38f05c0d8525937e049dfb">vkmm::Allocator_T::GetMemoryTypeMinAlignment</a></div><div class="ttdeci">VkDeviceSize GetMemoryTypeMinAlignment(uint32_t memTypeIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00972">AllocatorVk.h:972</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa766c3a5857919710629c25d66ab6141" name="aa766c3a5857919710629c25d66ab6141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa766c3a5857919710629c25d66ab6141">&#9670;&nbsp;</a></span>AllocateMemoryOfType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::AllocateMemoryOfType </td>
          <td>(</td>
          <td class="paramtype">VkDeviceSize&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkDeviceSize&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dedicatedAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkBuffer&#160;</td>
          <td class="paramname"><em>dedicatedBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkImage&#160;</td>
          <td class="paramname"><em>dedicatedImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvkmm_1_1_allocation_create_info.html">AllocationCreateInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>createInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memTypeIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevkmm.html#afff914a40f73475bdfc7931e145923a8">SuballocationType</a>&#160;</td>
          <td class="paramname"><em>suballocType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Allocation *&#160;</td>
          <td class="paramname"><em>pAllocation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01407">1407</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1417</span>    {</div>
<div class="line"><span class="lineno"> 1418</span>        assert(pAllocation != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 1419</span> </div>
<div class="line"><span class="lineno"> 1420</span>        <a class="code hl_typedef" href="namespacevkmm.html#a52c098c4a9f9772df7706e371362a785">AllocationCreateInfo</a>&amp; finalCreateInfo = createInfo;</div>
<div class="line"><span class="lineno"> 1421</span> </div>
<div class="line"><span class="lineno"> 1422</span>        <span class="comment">// If memory type is not HOST_VISIBLE, disable MAPPED.</span></div>
<div class="line"><span class="lineno"> 1423</span>        <span class="keywordflow">if</span> ((finalCreateInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a506eb061d833063d33b5b27f47c2185c">ALLOCATION_CREATE_MAPPED_BIT</a>) != 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1424</span>            (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryTypes[memTypeIndex].propertyFlags &amp; VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT) == 0)</div>
<div class="line"><span class="lineno"> 1425</span>        {</div>
<div class="line"><span class="lineno"> 1426</span>            finalCreateInfo.<a class="code hl_variable" href="structvkmm_1_1_allocation_create_info.html#a72fdc3904ebb8b4fa8fed34185e388f6">flags</a> &amp;= ~ALLOCATION_CREATE_MAPPED_BIT;</div>
<div class="line"><span class="lineno"> 1427</span>        }</div>
<div class="line"><span class="lineno"> 1428</span> </div>
<div class="line"><span class="lineno"> 1429</span>        <span class="comment">/*COM</span></div>
<div class="line"><span class="lineno"> 1430</span><span class="comment">        VmaBlockVector* const blockVector = m_pBlockVectors[memTypeIndex];</span></div>
<div class="line"><span class="lineno"> 1431</span><span class="comment">        assert(blockVector);</span></div>
<div class="line"><span class="lineno"> 1432</span><span class="comment">                const VkDeviceSize preferredBlockSize = blockVector-&gt;GetPreferredBlockSize();</span></div>
<div class="line"><span class="lineno"> 1433</span><span class="comment">        */</span></div>
<div class="line"><span class="lineno"> 1434</span> </div>
<div class="line"><span class="lineno"> 1435</span>        <span class="keyword">const</span> VkDeviceSize preferredBlockSize = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a5dd5fc1429a7c1e92b47d779ec4b3860">CalcPreferredBlockSize</a>(memTypeIndex);</div>
<div class="line"><span class="lineno"> 1436</span> </div>
<div class="line"><span class="lineno"> 1437</span>        <span class="keywordtype">bool</span> preferDedicatedMemory =</div>
<div class="line"><span class="lineno"> 1438</span>            <a class="code hl_define" href="_allocator_vk_8h.html#ae90504f33616bae90d9b6d8f69d61cbf">_DEBUG_ALWAYS_DEDICATED_MEMORY</a> ||</div>
<div class="line"><span class="lineno"> 1439</span>            dedicatedAllocation ||</div>
<div class="line"><span class="lineno"> 1440</span>            <span class="comment">// Heuristics: Allocate dedicated memory if requested size if greater than half of preferred block size.</span></div>
<div class="line"><span class="lineno"> 1441</span>            size &gt; preferredBlockSize / 2;</div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span>        <span class="keywordflow">if</span> (preferDedicatedMemory &amp;&amp;</div>
<div class="line"><span class="lineno"> 1444</span>            (finalCreateInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a989c58c950dd41358c6ea0544c362d93">ALLOCATION_CREATE_NEVER_ALLOCATE_BIT</a>) == 0 &amp;&amp;</div>
<div class="line"><span class="lineno"> 1445</span>            finalCreateInfo.pool == VK_NULL_HANDLE)</div>
<div class="line"><span class="lineno"> 1446</span>        {</div>
<div class="line"><span class="lineno"> 1447</span>            finalCreateInfo.flags |= <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6afb48a3c7d5babbfd6216c1d3759d1254">ALLOCATION_CREATE_DEDICATED_MEMORY_BIT</a>;</div>
<div class="line"><span class="lineno"> 1448</span>        }</div>
<div class="line"><span class="lineno"> 1449</span> </div>
<div class="line"><span class="lineno"> 1450</span>        <span class="keywordflow">if</span> ((finalCreateInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6afb48a3c7d5babbfd6216c1d3759d1254">ALLOCATION_CREATE_DEDICATED_MEMORY_BIT</a>) != 0)</div>
<div class="line"><span class="lineno"> 1451</span>        {</div>
<div class="line"><span class="lineno"> 1452</span>            <span class="keywordflow">if</span> ((finalCreateInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a989c58c950dd41358c6ea0544c362d93">ALLOCATION_CREATE_NEVER_ALLOCATE_BIT</a>) != 0)</div>
<div class="line"><span class="lineno"> 1453</span>            {</div>
<div class="line"><span class="lineno"> 1454</span>                <span class="keywordflow">return</span> VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1455</span>            }</div>
<div class="line"><span class="lineno"> 1456</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1457</span>            {</div>
<div class="line"><span class="lineno"> 1458</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a73b2324c5161a848f40661e1ffb4f34b">AllocateDedicatedMemory</a>(</div>
<div class="line"><span class="lineno"> 1459</span>                    size,</div>
<div class="line"><span class="lineno"> 1460</span>                    suballocType,</div>
<div class="line"><span class="lineno"> 1461</span>                    memTypeIndex,</div>
<div class="line"><span class="lineno"> 1462</span>                    (finalCreateInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a506eb061d833063d33b5b27f47c2185c">ALLOCATION_CREATE_MAPPED_BIT</a>) != 0,</div>
<div class="line"><span class="lineno"> 1463</span>                    (finalCreateInfo.flags &amp; <a class="code hl_enumvalue" href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a9b0a76028f7f6690ff10204334576684">ALLOCATION_CREATE_USER_DATA_COPY_STRING_BIT</a>) != 0,</div>
<div class="line"><span class="lineno"> 1464</span>                    finalCreateInfo,</div>
<div class="line"><span class="lineno"> 1465</span>                    dedicatedBuffer,</div>
<div class="line"><span class="lineno"> 1466</span>                    dedicatedImage,</div>
<div class="line"><span class="lineno"> 1467</span>                    pAllocation);</div>
<div class="line"><span class="lineno"> 1468</span>            }</div>
<div class="line"><span class="lineno"> 1469</span>        }</div>
<div class="line"><span class="lineno"> 1470</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1471</span>        {</div>
<div class="line"><span class="lineno"> 1472</span>            <span class="comment">/*COM</span></div>
<div class="line"><span class="lineno"> 1473</span><span class="comment">            VkResult res = blockVector-&gt;Allocate(</span></div>
<div class="line"><span class="lineno"> 1474</span><span class="comment">                VK_NULL_HANDLE, // hCurrentPool</span></div>
<div class="line"><span class="lineno"> 1475</span><span class="comment">                m_CurrentFrameIndex.load(),</span></div>
<div class="line"><span class="lineno"> 1476</span><span class="comment">                size,</span></div>
<div class="line"><span class="lineno"> 1477</span><span class="comment">                alignment,</span></div>
<div class="line"><span class="lineno"> 1478</span><span class="comment">                finalCreateInfo,</span></div>
<div class="line"><span class="lineno"> 1479</span><span class="comment">                suballocType,</span></div>
<div class="line"><span class="lineno"> 1480</span><span class="comment">                pAllocation);</span></div>
<div class="line"><span class="lineno"> 1481</span><span class="comment">            if (res == VK_SUCCESS)</span></div>
<div class="line"><span class="lineno"> 1482</span><span class="comment">            {</span></div>
<div class="line"><span class="lineno"> 1483</span><span class="comment">                return res;</span></div>
<div class="line"><span class="lineno"> 1484</span><span class="comment">            }</span></div>
<div class="line"><span class="lineno"> 1485</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 1486</span><span class="comment">            // 5. Try dedicated memory.</span></div>
<div class="line"><span class="lineno"> 1487</span><span class="comment">            if ((finalCreateInfo.flags &amp; VMA_ALLOCATION_CREATE_NEVER_ALLOCATE_BIT) != 0)</span></div>
<div class="line"><span class="lineno"> 1488</span><span class="comment">            {</span></div>
<div class="line"><span class="lineno"> 1489</span><span class="comment">                return VK_ERROR_OUT_OF_DEVICE_MEMORY;</span></div>
<div class="line"><span class="lineno"> 1490</span><span class="comment">            }</span></div>
<div class="line"><span class="lineno"> 1491</span><span class="comment">            else</span></div>
<div class="line"><span class="lineno"> 1492</span><span class="comment">            {</span></div>
<div class="line"><span class="lineno"> 1493</span><span class="comment">                res = AllocateDedicatedMemory(</span></div>
<div class="line"><span class="lineno"> 1494</span><span class="comment">                    size,</span></div>
<div class="line"><span class="lineno"> 1495</span><span class="comment">                    suballocType,</span></div>
<div class="line"><span class="lineno"> 1496</span><span class="comment">                    memTypeIndex,</span></div>
<div class="line"><span class="lineno"> 1497</span><span class="comment">                    (finalCreateInfo.flags &amp; VMA_ALLOCATION_CREATE_MAPPED_BIT) != 0,</span></div>
<div class="line"><span class="lineno"> 1498</span><span class="comment">                    (finalCreateInfo.flags &amp; VMA_ALLOCATION_CREATE_USER_DATA_COPY_STRING_BIT) != 0,</span></div>
<div class="line"><span class="lineno"> 1499</span><span class="comment">                    finalCreateInfo.pUserData,</span></div>
<div class="line"><span class="lineno"> 1500</span><span class="comment">                    dedicatedBuffer,</span></div>
<div class="line"><span class="lineno"> 1501</span><span class="comment">                    dedicatedImage,</span></div>
<div class="line"><span class="lineno"> 1502</span><span class="comment">                    pAllocation);</span></div>
<div class="line"><span class="lineno"> 1503</span><span class="comment">                if (res == VK_SUCCESS)</span></div>
<div class="line"><span class="lineno"> 1504</span><span class="comment">                {</span></div>
<div class="line"><span class="lineno"> 1505</span><span class="comment">                    // Succeeded: AllocateDedicatedMemory function already filld pMemory, nothing more to do here.</span></div>
<div class="line"><span class="lineno"> 1506</span><span class="comment">                    VMA_DEBUG_LOG(&quot;    Allocated as DedicatedMemory&quot;);</span></div>
<div class="line"><span class="lineno"> 1507</span><span class="comment">                    return VK_SUCCESS;</span></div>
<div class="line"><span class="lineno"> 1508</span><span class="comment">                }</span></div>
<div class="line"><span class="lineno"> 1509</span><span class="comment">                else</span></div>
<div class="line"><span class="lineno"> 1510</span><span class="comment">                {</span></div>
<div class="line"><span class="lineno"> 1511</span><span class="comment">                    // Everything failed: Return error code.</span></div>
<div class="line"><span class="lineno"> 1512</span><span class="comment">                    VMA_DEBUG_LOG(&quot;    vkAllocateMemory FAILED&quot;);</span></div>
<div class="line"><span class="lineno"> 1513</span><span class="comment">                    return res;</span></div>
<div class="line"><span class="lineno"> 1514</span><span class="comment">                }</span></div>
<div class="line"><span class="lineno"> 1515</span><span class="comment">            }</span></div>
<div class="line"><span class="lineno"> 1516</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno"> 1517</span>        }</div>
<div class="line"><span class="lineno"> 1518</span> </div>
<div class="line"><span class="lineno"> 1519</span>        assert(0);</div>
<div class="line"><span class="lineno"> 1520</span>        <span class="keywordflow">return</span> (VkResult)0;</div>
<div class="line"><span class="lineno"> 1521</span> </div>
<div class="line"><span class="lineno"> 1522</span>    }</div>
<div class="ttc" id="a_allocator_vk_8h_html_ae90504f33616bae90d9b6d8f69d61cbf"><div class="ttname"><a href="_allocator_vk_8h.html#ae90504f33616bae90d9b6d8f69d61cbf">_DEBUG_ALWAYS_DEDICATED_MEMORY</a></div><div class="ttdeci">#define _DEBUG_ALWAYS_DEDICATED_MEMORY</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00713">AllocatorVk.h:713</a></div></div>
<div class="ttc" id="anamespacevkmm_html_a3f0ebe38415be25c21d99ce603190ff6a9b0a76028f7f6690ff10204334576684"><div class="ttname"><a href="namespacevkmm.html#a3f0ebe38415be25c21d99ce603190ff6a9b0a76028f7f6690ff10204334576684">vkmm::ALLOCATION_CREATE_USER_DATA_COPY_STRING_BIT</a></div><div class="ttdeci">@ ALLOCATION_CREATE_USER_DATA_COPY_STRING_BIT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00619">AllocatorVk.h:619</a></div></div>
<div class="ttc" id="anamespacevkmm_html_a52c098c4a9f9772df7706e371362a785"><div class="ttname"><a href="namespacevkmm.html#a52c098c4a9f9772df7706e371362a785">vkmm::AllocationCreateInfo</a></div><div class="ttdeci">struct vkmm::AllocationCreateInfo AllocationCreateInfo</div></div>
<div class="ttc" id="astructvkmm_1_1_allocation_create_info_html_a72fdc3904ebb8b4fa8fed34185e388f6"><div class="ttname"><a href="structvkmm_1_1_allocation_create_info.html#a72fdc3904ebb8b4fa8fed34185e388f6">vkmm::AllocationCreateInfo::flags</a></div><div class="ttdeci">AllocationCreateFlags flags</div><div class="ttdoc">Use #VmaAllocationCreateFlagBits enum.</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00629">AllocatorVk.h:629</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a5dd5fc1429a7c1e92b47d779ec4b3860"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a5dd5fc1429a7c1e92b47d779ec4b3860">vkmm::Allocator_T::CalcPreferredBlockSize</a></div><div class="ttdeci">VkDeviceSize CalcPreferredBlockSize(uint32_t memTypeIndex)</div><div class="ttdoc">COM VmaVulkanFunctions m_VulkanFunctions;.</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l01774">AllocatorVk.cpp:1774</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a73b2324c5161a848f40661e1ffb4f34b"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a73b2324c5161a848f40661e1ffb4f34b">vkmm::Allocator_T::AllocateDedicatedMemory</a></div><div class="ttdeci">VkResult AllocateDedicatedMemory(VkDeviceSize size, SuballocationType suballocType, uint32_t memTypeIndex, bool map, bool isUserDataString, AllocationCreateInfo &amp;createInfo, VkBuffer dedicatedBuffer, VkImage dedicatedImage, Allocation *pAllocation)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l01315">AllocatorVk.cpp:1315</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a147f01e5aeea587b8bb9e8a6566da437" name="a147f01e5aeea587b8bb9e8a6566da437"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a147f01e5aeea587b8bb9e8a6566da437">&#9670;&nbsp;</a></span>AllocateVulkanMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::AllocateVulkanMemory </td>
          <td>(</td>
          <td class="paramtype">VkMemoryAllocateInfo *&#160;</td>
          <td class="paramname"><em>pAllocateInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkDeviceMemory *&#160;</td>
          <td class="paramname"><em>pMemory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >VmaMutexLock lock(m_HeapSizeLimitMutex, m_UseMutex);</p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01074">1074</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1075</span>    {</div>
<div class="line"><span class="lineno"> 1076</span>        <span class="keyword">const</span> uint32_t heapIndex = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#aab3b1cc35b312451179acc4ad8ad5a61">MemoryTypeIndexToHeapIndex</a>(pAllocateInfo-&gt;memoryTypeIndex);</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>        VkResult res;</div>
<div class="line"><span class="lineno"> 1079</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a>[heapIndex] != VK_WHOLE_SIZE)</div>
<div class="line"><span class="lineno"> 1080</span>        {</div>
<div class="line"><span class="lineno"> 1083</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a>[heapIndex] &gt;= pAllocateInfo-&gt;allocationSize)</div>
<div class="line"><span class="lineno"> 1084</span>            {</div>
<div class="line"><span class="lineno"> 1085</span>                    res = vkAllocateMemory(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, pAllocateInfo, <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a7a05d50e9cd40c257fd613c54d4adda2">GetAllocationCallbacks</a>(), pMemory);</div>
<div class="line"><span class="lineno"> 1086</span>                    <span class="keywordflow">if</span> (res == VK_SUCCESS)</div>
<div class="line"><span class="lineno"> 1087</span>                    {</div>
<div class="line"><span class="lineno"> 1088</span>                        <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a>[heapIndex] -= pAllocateInfo-&gt;allocationSize;</div>
<div class="line"><span class="lineno"> 1089</span> </div>
<div class="line"><span class="lineno"> 1090</span>                    }</div>
<div class="line"><span class="lineno"> 1091</span>            }</div>
<div class="line"><span class="lineno"> 1092</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1093</span>            {</div>
<div class="line"><span class="lineno"> 1094</span>                res = VK_ERROR_OUT_OF_DEVICE_MEMORY;</div>
<div class="line"><span class="lineno"> 1095</span>            }</div>
<div class="line"><span class="lineno"> 1096</span>        }</div>
<div class="line"><span class="lineno"> 1097</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1098</span>        {</div>
<div class="line"><span class="lineno"> 1099</span>            res = vkAllocateMemory(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, pAllocateInfo, <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a7a05d50e9cd40c257fd613c54d4adda2">GetAllocationCallbacks</a>(), pMemory);</div>
<div class="line"><span class="lineno"> 1100</span>        }</div>
<div class="line"><span class="lineno"> 1101</span> </div>
<div class="line"><span class="lineno"> 1102</span>        <span class="keywordflow">if</span> (res == VK_SUCCESS &amp;&amp; <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>.<a class="code hl_variable" href="structvkmm_1_1_device_memory_callbacks.html#a99b9a21a5fee89c829e4b157765b63ae">pfnAllocate</a> != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1103</span>        {</div>
<div class="line"><span class="lineno"> 1104</span>            (*<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>.<a class="code hl_variable" href="structvkmm_1_1_device_memory_callbacks.html#a99b9a21a5fee89c829e4b157765b63ae">pfnAllocate</a>)(<span class="keyword">this</span>, pAllocateInfo-&gt;memoryTypeIndex, *pMemory, pAllocateInfo-&gt;allocationSize);</div>
<div class="line"><span class="lineno"> 1105</span>        }</div>
<div class="line"><span class="lineno"> 1106</span> </div>
<div class="line"><span class="lineno"> 1107</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1108</span>    }</div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_aab3b1cc35b312451179acc4ad8ad5a61"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#aab3b1cc35b312451179acc4ad8ad5a61">vkmm::Allocator_T::MemoryTypeIndexToHeapIndex</a></div><div class="ttdeci">uint32_t MemoryTypeIndexToHeapIndex(uint32_t memTypeIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00960">AllocatorVk.h:960</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab708d3892e16e981324489e8fc67241f" name="ab708d3892e16e981324489e8fc67241f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab708d3892e16e981324489e8fc67241f">&#9670;&nbsp;</a></span>BindBufferMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::BindBufferMemory </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkBuffer&#160;</td>
          <td class="paramname"><em>hBuffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l00854">854</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  855</span>    {</div>
<div class="line"><span class="lineno">  856</span>        VkResult res = VK_SUCCESS;</div>
<div class="line"><span class="lineno">  857</span>        <span class="keywordflow">switch</span> (hAllocation-&gt;GetType())</div>
<div class="line"><span class="lineno">  858</span>        {</div>
<div class="line"><span class="lineno">  859</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32">Allocation_T::ALLOCATION_TYPE_DEDICATED</a>:</div>
<div class="line"><span class="lineno">  860</span>            res = vkBindBufferMemory(</div>
<div class="line"><span class="lineno">  861</span>                <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>,</div>
<div class="line"><span class="lineno">  862</span>                hBuffer,</div>
<div class="line"><span class="lineno">  863</span>                hAllocation-&gt;GetMemory(),</div>
<div class="line"><span class="lineno">  864</span>                0); <span class="comment">//memoryOffset</span></div>
<div class="line"><span class="lineno">  865</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  866</span> </div>
<div class="line"><span class="lineno">  867</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0aba26468b3e47bb390ac8ae26daaa16b473">Allocation_T::ALLOCATION_TYPE_BLOCK</a>:</div>
<div class="line"><span class="lineno">  868</span>        {</div>
<div class="line"><span class="lineno">  869</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  870</span><span class="comment">            VmaDeviceMemoryBlock* pBlock = hAllocation-&gt;GetBlock();</span></div>
<div class="line"><span class="lineno">  871</span><span class="comment">            VMA_ASSERT(pBlock &amp;&amp; &quot;Binding buffer to allocation that doesn&#39;t belong to any block. Is the allocation lost?&quot;);</span></div>
<div class="line"><span class="lineno">  872</span><span class="comment">            res = pBlock-&gt;BindBufferMemory(this, hAllocation, hBuffer);</span></div>
<div class="line"><span class="lineno">  873</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno">  874</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  875</span>        }</div>
<div class="line"><span class="lineno">  876</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  877</span>            assert(0);</div>
<div class="line"><span class="lineno">  878</span>        }</div>
<div class="line"><span class="lineno">  879</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno">  880</span>    }</div>
<div class="ttc" id="astructvkmm_1_1_allocation___t_html_a1c61d39101ce6323ab4ca9d95b32d0aba26468b3e47bb390ac8ae26daaa16b473"><div class="ttname"><a href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0aba26468b3e47bb390ac8ae26daaa16b473">vkmm::Allocation_T::ALLOCATION_TYPE_BLOCK</a></div><div class="ttdeci">@ ALLOCATION_TYPE_BLOCK</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l01127">AllocatorVk.h:1127</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocation___t_html_a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32"><div class="ttname"><a href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32">vkmm::Allocation_T::ALLOCATION_TYPE_DEDICATED</a></div><div class="ttdeci">@ ALLOCATION_TYPE_DEDICATED</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l01128">AllocatorVk.h:1128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52c2c2bd88e8f9950625ba5bb0f0e918" name="a52c2c2bd88e8f9950625ba5bb0f0e918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52c2c2bd88e8f9950625ba5bb0f0e918">&#9670;&nbsp;</a></span>BindImageMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::BindImageMemory </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkImage&#160;</td>
          <td class="paramname"><em>hImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5dd5fc1429a7c1e92b47d779ec4b3860" name="a5dd5fc1429a7c1e92b47d779ec4b3860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd5fc1429a7c1e92b47d779ec4b3860">&#9670;&nbsp;</a></span>CalcPreferredBlockSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkDeviceSize vkmm::Allocator_T::CalcPreferredBlockSize </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memTypeIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>COM VmaVulkanFunctions m_VulkanFunctions;. </p>
<p >COM void ImportVulkanFunctions(const VmaVulkanFunctions* pVulkanFunctions); </p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01774">1774</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1775</span>    {</div>
<div class="line"><span class="lineno"> 1776</span>        <span class="keyword">const</span> uint32_t heapIndex = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#aab3b1cc35b312451179acc4ad8ad5a61">MemoryTypeIndexToHeapIndex</a>(memTypeIndex);</div>
<div class="line"><span class="lineno"> 1777</span>        <span class="keyword">const</span> VkDeviceSize heapSize = <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryHeaps[heapIndex].size;</div>
<div class="line"><span class="lineno"> 1778</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> isSmallHeap = heapSize &lt;= <a class="code hl_define" href="_allocator_vk_8h.html#ae2d4245f1960850cc7890970339a753c">_SMALL_HEAP_MAX_SIZE</a>;  <span class="comment">//1GB</span></div>
<div class="line"><span class="lineno"> 1779</span>        <span class="keywordflow">return</span> isSmallHeap ? (heapSize / 8) : <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#aa62ce8d2fa448c42f9def5045086f96a">m_PreferredLargeHeapBlockSize</a>;</div>
<div class="line"><span class="lineno"> 1780</span>    }</div>
<div class="ttc" id="a_allocator_vk_8h_html_ae2d4245f1960850cc7890970339a753c"><div class="ttname"><a href="_allocator_vk_8h.html#ae2d4245f1960850cc7890970339a753c">_SMALL_HEAP_MAX_SIZE</a></div><div class="ttdeci">#define _SMALL_HEAP_MAX_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00720">AllocatorVk.h:720</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2d080456d6832df21211055223d0b4c" name="ae2d080456d6832df21211055223d0b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2d080456d6832df21211055223d0b4c">&#9670;&nbsp;</a></span>CalculateStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::CalculateStats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvkmm_1_1_stats.html">Stats</a> *&#160;</td>
          <td class="paramname"><em>pStats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0273b41ac5cc1ecc659ef11cb1e3e249" name="a0273b41ac5cc1ecc659ef11cb1e3e249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0273b41ac5cc1ecc659ef11cb1e3e249">&#9670;&nbsp;</a></span>CheckCorruption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::CheckCorruption </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memoryTypeBits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5824afca205aa9205133c2f56bf37eae" name="a5824afca205aa9205133c2f56bf37eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5824afca205aa9205133c2f56bf37eae">&#9670;&nbsp;</a></span>CheckPoolCorruption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::CheckPoolCorruption </td>
          <td>(</td>
          <td class="paramtype">Pool&#160;</td>
          <td class="paramname"><em>hPool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a128632845776ef17f5b4199dc7f11907" name="a128632845776ef17f5b4199dc7f11907"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a128632845776ef17f5b4199dc7f11907">&#9670;&nbsp;</a></span>CreateLostAllocation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::CreateLostAllocation </td>
          <td>(</td>
          <td class="paramtype">Allocation *&#160;</td>
          <td class="paramname"><em>pAllocation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5b34b09648e6e6e672d0d53c3e7421f0" name="a5b34b09648e6e6e672d0d53c3e7421f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b34b09648e6e6e672d0d53c3e7421f0">&#9670;&nbsp;</a></span>CreatePool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::CreatePool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvkmm_1_1_pool_create_info.html">PoolCreateInfo</a> *&#160;</td>
          <td class="paramname"><em>pCreateInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Pool *&#160;</td>
          <td class="paramname"><em>pPool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1b200016f22f47763074ba3e16cf084f" name="a1b200016f22f47763074ba3e16cf084f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b200016f22f47763074ba3e16cf084f">&#9670;&nbsp;</a></span>Defragment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::Defragment </td>
          <td>(</td>
          <td class="paramtype">Allocation *&#160;</td>
          <td class="paramname"><em>pAllocations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>allocationCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkBool32 *&#160;</td>
          <td class="paramname"><em>pAllocationsChanged</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structvkmm_1_1_defragmentation_info.html">DefragmentationInfo</a> *&#160;</td>
          <td class="paramname"><em>pDefragmentationInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvkmm_1_1_defragmentation_stats.html">DefragmentationStats</a> *&#160;</td>
          <td class="paramname"><em>pDefragmentationStats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abe254520a3e9bb18f58550896faebc2a" name="abe254520a3e9bb18f58550896faebc2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe254520a3e9bb18f58550896faebc2a">&#9670;&nbsp;</a></span>DestroyPool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::DestroyPool </td>
          <td>(</td>
          <td class="paramtype">Pool&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1a9db38a13a0fdce122fa65d3afc78bc" name="a1a9db38a13a0fdce122fa65d3afc78bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a9db38a13a0fdce122fa65d3afc78bc">&#9670;&nbsp;</a></span>FillAllocation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::FillAllocation </td>
          <td>(</td>
          <td class="paramtype">const Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l00628">628</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  629</span>    {</div>
<div class="line"><span class="lineno">  630</span>        <span class="keywordflow">if</span> (<a class="code hl_define" href="_allocator_vk_8h.html#a15ab30873a4a160165dccb50a7f39254">_DEBUG_INITIALIZE_ALLOCATIONS</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  631</span>            !hAllocation-&gt;CanBecomeLost() &amp;&amp;</div>
<div class="line"><span class="lineno">  632</span>            (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryTypes[hAllocation-&gt;GetMemoryTypeIndex()].propertyFlags &amp; VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT) != 0)</div>
<div class="line"><span class="lineno">  633</span>        {</div>
<div class="line"><span class="lineno">  634</span>            <span class="keywordtype">void</span>* pData = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  635</span>            VkResult res = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a2e43e9453b2f2c6fe6ee2447286be9d0">Map</a>(hAllocation, &amp;pData);</div>
<div class="line"><span class="lineno">  636</span>            <span class="keywordflow">if</span> (res == VK_SUCCESS)</div>
<div class="line"><span class="lineno">  637</span>            {</div>
<div class="line"><span class="lineno">  638</span>                memset(pData, (<span class="keywordtype">int</span>)pattern, (<span class="keywordtype">size_t</span>)hAllocation-&gt;GetSize());</div>
<div class="line"><span class="lineno">  639</span>                <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#aa1322e5e8e82ac40f15686de09bddc45">FlushOrInvalidateAllocation</a>(hAllocation, 0, VK_WHOLE_SIZE, <a class="code hl_enumvalue" href="namespacevkmm.html#ab3981f40253dd3d1328ecc3721b7c99fa8dfb948b8f7b7f60a54f9ac3d7c53e51">CACHE_FLUSH</a>);</div>
<div class="line"><span class="lineno">  640</span>                <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a45acc41c204faa509d847343cf809695">Unmap</a>(hAllocation);</div>
<div class="line"><span class="lineno">  641</span>            }</div>
<div class="line"><span class="lineno">  642</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  643</span>            {</div>
<div class="line"><span class="lineno">  644</span>                assert(0 &amp;&amp; <span class="stringliteral">&quot;VMA_DEBUG_INITIALIZE_ALLOCATIONS is enabled, but couldn&#39;t map memory to fill allocation.&quot;</span>);</div>
<div class="line"><span class="lineno">  645</span>            }</div>
<div class="line"><span class="lineno">  646</span>        }</div>
<div class="line"><span class="lineno">  647</span>    }</div>
<div class="ttc" id="anamespacevkmm_html_ab3981f40253dd3d1328ecc3721b7c99fa8dfb948b8f7b7f60a54f9ac3d7c53e51"><div class="ttname"><a href="namespacevkmm.html#ab3981f40253dd3d1328ecc3721b7c99fa8dfb948b8f7b7f60a54f9ac3d7c53e51">vkmm::CACHE_FLUSH</a></div><div class="ttdeci">@ CACHE_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00903">AllocatorVk.h:903</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a2e43e9453b2f2c6fe6ee2447286be9d0"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a2e43e9453b2f2c6fe6ee2447286be9d0">vkmm::Allocator_T::Map</a></div><div class="ttdeci">VkResult Map(Allocation hAllocation, void **ppData)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l00882">AllocatorVk.cpp:882</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a45acc41c204faa509d847343cf809695"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a45acc41c204faa509d847343cf809695">vkmm::Allocator_T::Unmap</a></div><div class="ttdeci">void Unmap(Allocation hAllocation)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l00913">AllocatorVk.cpp:913</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_aa1322e5e8e82ac40f15686de09bddc45"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#aa1322e5e8e82ac40f15686de09bddc45">vkmm::Allocator_T::FlushOrInvalidateAllocation</a></div><div class="ttdeci">void FlushOrInvalidateAllocation(Allocation hAllocation, VkDeviceSize offset, VkDeviceSize size, CACHE_OPERATION op)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l00682">AllocatorVk.cpp:682</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1322e5e8e82ac40f15686de09bddc45" name="aa1322e5e8e82ac40f15686de09bddc45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1322e5e8e82ac40f15686de09bddc45">&#9670;&nbsp;</a></span>FlushOrInvalidateAllocation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::FlushOrInvalidateAllocation </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkDeviceSize&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkDeviceSize&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacevkmm.html#ab3981f40253dd3d1328ecc3721b7c99f">CACHE_OPERATION</a>&#160;</td>
          <td class="paramname"><em>op</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l00682">682</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  686</span>    {</div>
<div class="line"><span class="lineno">  687</span>        <span class="keyword">const</span> uint32_t memTypeIndex = hAllocation-&gt;GetMemoryTypeIndex();</div>
<div class="line"><span class="lineno">  688</span>        <span class="keywordflow">if</span> (size &gt; 0 &amp;&amp; <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a3322e10a23231f6298c75a765b75b360">IsMemoryTypeNonCoherent</a>(memTypeIndex))</div>
<div class="line"><span class="lineno">  689</span>        {</div>
<div class="line"><span class="lineno">  690</span>            <span class="keyword">const</span> VkDeviceSize allocationSize = hAllocation-&gt;GetSize();</div>
<div class="line"><span class="lineno">  691</span>            assert(offset &lt;= allocationSize);</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>            <span class="keyword">const</span> VkDeviceSize nonCoherentAtomSize = <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a>.limits.nonCoherentAtomSize;</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>            VkMappedMemoryRange memRange = { VK_STRUCTURE_TYPE_MAPPED_MEMORY_RANGE };</div>
<div class="line"><span class="lineno">  696</span>            memRange.memory = hAllocation-&gt;GetMemory();</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span>            <span class="keywordflow">switch</span> (hAllocation-&gt;GetType())</div>
<div class="line"><span class="lineno">  699</span>            {</div>
<div class="line"><span class="lineno">  700</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32">Allocation_T::ALLOCATION_TYPE_DEDICATED</a>:</div>
<div class="line"><span class="lineno">  701</span>                memRange.offset = AlignDown(offset, nonCoherentAtomSize);</div>
<div class="line"><span class="lineno">  702</span>                <span class="keywordflow">if</span> (size == VK_WHOLE_SIZE)</div>
<div class="line"><span class="lineno">  703</span>                {</div>
<div class="line"><span class="lineno">  704</span>                    memRange.size = allocationSize - memRange.offset;</div>
<div class="line"><span class="lineno">  705</span>                }</div>
<div class="line"><span class="lineno">  706</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  707</span>                {</div>
<div class="line"><span class="lineno">  708</span>                    assert(offset + size &lt;= allocationSize);</div>
<div class="line"><span class="lineno">  709</span>                    memRange.size = __min(</div>
<div class="line"><span class="lineno">  710</span>                        AlignUp(size + (offset - memRange.offset), nonCoherentAtomSize),</div>
<div class="line"><span class="lineno">  711</span>                        allocationSize - memRange.offset);</div>
<div class="line"><span class="lineno">  712</span>                }</div>
<div class="line"><span class="lineno">  713</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0aba26468b3e47bb390ac8ae26daaa16b473">Allocation_T::ALLOCATION_TYPE_BLOCK</a>:</div>
<div class="line"><span class="lineno">  716</span>            {</div>
<div class="line"><span class="lineno">  717</span>                <span class="comment">/* COM</span></div>
<div class="line"><span class="lineno">  718</span><span class="comment">                // 1. Still within this allocation.</span></div>
<div class="line"><span class="lineno">  719</span><span class="comment">                memRange.offset = AlignDown(offset, nonCoherentAtomSize);</span></div>
<div class="line"><span class="lineno">  720</span><span class="comment">                if (size == VK_WHOLE_SIZE)</span></div>
<div class="line"><span class="lineno">  721</span><span class="comment">                {</span></div>
<div class="line"><span class="lineno">  722</span><span class="comment">                    size = allocationSize - offset;</span></div>
<div class="line"><span class="lineno">  723</span><span class="comment">                }</span></div>
<div class="line"><span class="lineno">  724</span><span class="comment">                else</span></div>
<div class="line"><span class="lineno">  725</span><span class="comment">                {</span></div>
<div class="line"><span class="lineno">  726</span><span class="comment">                    assert(offset + size &lt;= allocationSize);</span></div>
<div class="line"><span class="lineno">  727</span><span class="comment">                }</span></div>
<div class="line"><span class="lineno">  728</span><span class="comment">                memRange.size = AlignUp(size + (offset - memRange.offset), nonCoherentAtomSize);</span></div>
<div class="line"><span class="lineno">  729</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  730</span><span class="comment">                // 2. Adjust to whole block.</span></div>
<div class="line"><span class="lineno">  731</span><span class="comment">                const VkDeviceSize allocationOffset = hAllocation-&gt;GetOffset();</span></div>
<div class="line"><span class="lineno">  732</span><span class="comment">                assert(allocationOffset % nonCoherentAtomSize == 0);</span></div>
<div class="line"><span class="lineno">  733</span><span class="comment">                const VkDeviceSize blockSize = hAllocation-&gt;GetBlock()-&gt;m_pMetadata-&gt;GetSize();</span></div>
<div class="line"><span class="lineno">  734</span><span class="comment">                memRange.offset += allocationOffset;</span></div>
<div class="line"><span class="lineno">  735</span><span class="comment">                memRange.size = __min(memRange.size, blockSize - memRange.offset);</span></div>
<div class="line"><span class="lineno">  736</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  737</span><span class="comment">                break;</span></div>
<div class="line"><span class="lineno">  738</span><span class="comment">                */</span></div>
<div class="line"><span class="lineno">  739</span>            }</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  742</span>                assert(0);</div>
<div class="line"><span class="lineno">  743</span>            }</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>            <span class="keywordflow">switch</span> (op)</div>
<div class="line"><span class="lineno">  746</span>            {</div>
<div class="line"><span class="lineno">  747</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacevkmm.html#ab3981f40253dd3d1328ecc3721b7c99fa8dfb948b8f7b7f60a54f9ac3d7c53e51">CACHE_FLUSH</a>:</div>
<div class="line"><span class="lineno">  748</span>                vkFlushMappedMemoryRanges(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, 1, &amp;memRange);</div>
<div class="line"><span class="lineno">  749</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  750</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacevkmm.html#ab3981f40253dd3d1328ecc3721b7c99fa21feb146055fca4c9ad16f1e8c669d76">CACHE_INVALIDATE</a>:</div>
<div class="line"><span class="lineno">  751</span>                vkInvalidateMappedMemoryRanges(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, 1, &amp;memRange);</div>
<div class="line"><span class="lineno">  752</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  753</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  754</span>                assert(0);</div>
<div class="line"><span class="lineno">  755</span>            }</div>
<div class="line"><span class="lineno">  756</span>        }</div>
<div class="line"><span class="lineno">  757</span>        <span class="comment">// else: Just ignore this call.</span></div>
<div class="line"><span class="lineno">  758</span>    }</div>
<div class="ttc" id="anamespacevkmm_html_ab3981f40253dd3d1328ecc3721b7c99fa21feb146055fca4c9ad16f1e8c669d76"><div class="ttname"><a href="namespacevkmm.html#ab3981f40253dd3d1328ecc3721b7c99fa21feb146055fca4c9ad16f1e8c669d76">vkmm::CACHE_INVALIDATE</a></div><div class="ttdeci">@ CACHE_INVALIDATE</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00903">AllocatorVk.h:903</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a3322e10a23231f6298c75a765b75b360"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a3322e10a23231f6298c75a765b75b360">vkmm::Allocator_T::IsMemoryTypeNonCoherent</a></div><div class="ttdeci">bool IsMemoryTypeNonCoherent(uint32_t memTypeIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00966">AllocatorVk.h:966</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42ef7e0216dca87fa6c3ac531f53ec7a" name="a42ef7e0216dca87fa6c3ac531f53ec7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ef7e0216dca87fa6c3ac531f53ec7a">&#9670;&nbsp;</a></span>FreeDedicatedMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::FreeDedicatedMemory </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>allocation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01144">1144</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1145</span>    {</div>
<div class="line"><span class="lineno"> 1146</span> </div>
<div class="line"><span class="lineno"> 1147</span>        assert(allocation &amp;&amp; allocation-&gt;GetType() == <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32">Allocation_T::ALLOCATION_TYPE_DEDICATED</a>);</div>
<div class="line"><span class="lineno"> 1148</span> </div>
<div class="line"><span class="lineno"> 1149</span>        <span class="keyword">const</span> uint32_t memTypeIndex = allocation-&gt;GetMemoryTypeIndex();</div>
<div class="line"><span class="lineno"> 1150</span>        {</div>
<div class="line"><span class="lineno"> 1151</span>            <a class="code hl_typedef" href="structvkmm_1_1_allocator___t.html#afeff925dde123dcda1561cf8a16113b2">AllocMapTy</a>  pDedicatedAllocations = <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a1c10650c8d62bf794fec91e8229ca8d9">m_pDedicatedAllocations</a>[memTypeIndex];</div>
<div class="line"><span class="lineno"> 1152</span>            <span class="keyword">const</span>  <span class="keywordtype">int</span> <span class="keywordtype">id</span> = allocation-&gt;ID;</div>
<div class="line"><span class="lineno"> 1153</span>            AcquireSRWLockExclusive(&amp;<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a51507d8e15e667518e7feced00deb9da">slim</a>);</div>
<div class="line"><span class="lineno"> 1154</span>            pDedicatedAllocations.unsafe_erase(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno"> 1155</span>            ReleaseSRWLockExclusive(&amp;<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a51507d8e15e667518e7feced00deb9da">slim</a>);</div>
<div class="line"><span class="lineno"> 1156</span>        }</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>        VkDeviceMemory hMemory = allocation-&gt;GetMemory();</div>
<div class="line"><span class="lineno"> 1159</span> </div>
<div class="line"><span class="lineno"> 1160</span>        <span class="keywordflow">if</span> (allocation-&gt;GetMappedData() != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1161</span>        {</div>
<div class="line"><span class="lineno"> 1162</span>            vkUnmapMemory(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, hMemory);</div>
<div class="line"><span class="lineno"> 1163</span>        }</div>
<div class="line"><span class="lineno"> 1164</span> </div>
<div class="line"><span class="lineno"> 1165</span>        <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#ade3a9d1e99c19b97d1c5e6697ab27172">FreeVulkanMemory</a>(memTypeIndex, allocation-&gt;GetSize(), hMemory);</div>
<div class="line"><span class="lineno"> 1166</span> </div>
<div class="line"><span class="lineno"> 1167</span>        <a class="code hl_define" href="_allocator_vk_8h.html#a89f74447d93eb33a3479eae10018246e">VKMM_DEBUG_LOG</a>(<span class="stringliteral">&quot;    Freed DedicatedMemory MemoryTypeIndex=%u&quot;</span>, memTypeIndex);</div>
<div class="line"><span class="lineno"> 1168</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a67ea701770f0ea904c7a32a88caebfe6" name="a67ea701770f0ea904c7a32a88caebfe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ea701770f0ea904c7a32a88caebfe6">&#9670;&nbsp;</a></span>FreeMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::FreeMemory </td>
          <td>(</td>
          <td class="paramtype">const Allocation&#160;</td>
          <td class="paramname"><em>allocation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01663">1663</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1664</span>    {</div>
<div class="line"><span class="lineno"> 1665</span>        assert(allocation);</div>
<div class="line"><span class="lineno"> 1666</span> </div>
<div class="line"><span class="lineno"> 1667</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="structvkmm_1_1_allocator___t.html#ae70583496b835894f74ecc84bd15e948">TouchAllocation</a>(allocation))</div>
<div class="line"><span class="lineno"> 1668</span>        {</div>
<div class="line"><span class="lineno"> 1669</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="_allocator_vk_8h.html#a15ab30873a4a160165dccb50a7f39254">_DEBUG_INITIALIZE_ALLOCATIONS</a>)</div>
<div class="line"><span class="lineno"> 1670</span>            {</div>
<div class="line"><span class="lineno"> 1671</span>                <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a1a9db38a13a0fdce122fa65d3afc78bc">FillAllocation</a>(allocation, ALLOCATION_FILL_PATTERN_DESTROYED);</div>
<div class="line"><span class="lineno"> 1672</span>            }</div>
<div class="line"><span class="lineno"> 1673</span> </div>
<div class="line"><span class="lineno"> 1674</span>            <span class="keywordflow">switch</span> (allocation-&gt;GetType())</div>
<div class="line"><span class="lineno"> 1675</span>            {</div>
<div class="line"><span class="lineno"> 1676</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0aba26468b3e47bb390ac8ae26daaa16b473">Allocation_T::ALLOCATION_TYPE_BLOCK</a>:</div>
<div class="line"><span class="lineno"> 1677</span>            {</div>
<div class="line"><span class="lineno"> 1678</span>                <span class="comment">/*COM</span></div>
<div class="line"><span class="lineno"> 1679</span><span class="comment">                BlockVector* pBlockVector = VMA_NULL;</span></div>
<div class="line"><span class="lineno"> 1680</span><span class="comment">                Pool hPool = allocation-&gt;GetPool();</span></div>
<div class="line"><span class="lineno"> 1681</span><span class="comment">                if (hPool != VK_NULL_HANDLE)</span></div>
<div class="line"><span class="lineno"> 1682</span><span class="comment">                {</span></div>
<div class="line"><span class="lineno"> 1683</span><span class="comment">                    pBlockVector = &amp;hPool-&gt;m_BlockVector;</span></div>
<div class="line"><span class="lineno"> 1684</span><span class="comment">                }</span></div>
<div class="line"><span class="lineno"> 1685</span><span class="comment">                else</span></div>
<div class="line"><span class="lineno"> 1686</span><span class="comment">                {</span></div>
<div class="line"><span class="lineno"> 1687</span><span class="comment">                    const uint32_t memTypeIndex = allocation-&gt;GetMemoryTypeIndex();</span></div>
<div class="line"><span class="lineno"> 1688</span><span class="comment">                    pBlockVector = m_pBlockVectors[memTypeIndex];</span></div>
<div class="line"><span class="lineno"> 1689</span><span class="comment">                }</span></div>
<div class="line"><span class="lineno"> 1690</span><span class="comment">                pBlockVector-&gt;Free(allocation);</span></div>
<div class="line"><span class="lineno"> 1691</span><span class="comment">                */</span></div>
<div class="line"><span class="lineno"> 1692</span>            }</div>
<div class="line"><span class="lineno"> 1693</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1694</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32">Allocation_T::ALLOCATION_TYPE_DEDICATED</a>:</div>
<div class="line"><span class="lineno"> 1695</span>                <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a42ef7e0216dca87fa6c3ac531f53ec7a">FreeDedicatedMemory</a>(allocation);</div>
<div class="line"><span class="lineno"> 1696</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1697</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno"> 1698</span>                assert(0);</div>
<div class="line"><span class="lineno"> 1699</span>            }</div>
<div class="line"><span class="lineno"> 1700</span>        }</div>
<div class="line"><span class="lineno"> 1701</span> </div>
<div class="line"><span class="lineno"> 1702</span>        vkmm::Delete(<span class="keyword">this</span>, allocation);</div>
<div class="line"><span class="lineno"> 1703</span>        </div>
<div class="line"><span class="lineno"> 1704</span> </div>
<div class="line"><span class="lineno"> 1705</span>    }</div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_a42ef7e0216dca87fa6c3ac531f53ec7a"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#a42ef7e0216dca87fa6c3ac531f53ec7a">vkmm::Allocator_T::FreeDedicatedMemory</a></div><div class="ttdeci">void FreeDedicatedMemory(Allocation allocation)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l01144">AllocatorVk.cpp:1144</a></div></div>
<div class="ttc" id="astructvkmm_1_1_allocator___t_html_ae70583496b835894f74ecc84bd15e948"><div class="ttname"><a href="structvkmm_1_1_allocator___t.html#ae70583496b835894f74ecc84bd15e948">vkmm::Allocator_T::TouchAllocation</a></div><div class="ttdeci">bool TouchAllocation(Allocation hAllocation)</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8cpp_source.html#l00648">AllocatorVk.cpp:648</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade3a9d1e99c19b97d1c5e6697ab27172" name="ade3a9d1e99c19b97d1c5e6697ab27172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade3a9d1e99c19b97d1c5e6697ab27172">&#9670;&nbsp;</a></span>FreeVulkanMemory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::FreeVulkanMemory </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memoryType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkDeviceSize&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkDeviceMemory&#160;</td>
          <td class="paramname"><em>hMemory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01057">1057</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1058</span>    {</div>
<div class="line"><span class="lineno"> 1059</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>.<a class="code hl_variable" href="structvkmm_1_1_device_memory_callbacks.html#a54d4327cc4bce938703b92a6b01208b5">pfnFree</a> != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1060</span>        {</div>
<div class="line"><span class="lineno"> 1061</span>            (*<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a992a462f20ad09c02d8e95739546be39">m_DeviceMemoryCallbacks</a>.<a class="code hl_variable" href="structvkmm_1_1_device_memory_callbacks.html#a54d4327cc4bce938703b92a6b01208b5">pfnFree</a>)(<span class="keyword">this</span>, memoryType, hMemory, size);</div>
<div class="line"><span class="lineno"> 1062</span>        }</div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>        vkFreeMemory(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, hMemory, <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a7a05d50e9cd40c257fd613c54d4adda2">GetAllocationCallbacks</a>());</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>        <span class="keyword">const</span> uint32_t heapIndex = <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#aab3b1cc35b312451179acc4ad8ad5a61">MemoryTypeIndexToHeapIndex</a>(memoryType);</div>
<div class="line"><span class="lineno"> 1067</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a>[heapIndex] != VK_WHOLE_SIZE)</div>
<div class="line"><span class="lineno"> 1068</span>        {</div>
<div class="line"><span class="lineno"> 1069</span>            <span class="comment">//VmaMutexLock lock(m_HeapSizeLimitMutex, m_UseMutex);</span></div>
<div class="line"><span class="lineno"> 1070</span>            <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a2c0d6ad490b2b9b07143a92f27b1adf5">m_HeapSizeLimit</a>[heapIndex] += size;</div>
<div class="line"><span class="lineno"> 1071</span>        }</div>
<div class="line"><span class="lineno"> 1072</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a05d50e9cd40c257fd613c54d4adda2" name="a7a05d50e9cd40c257fd613c54d4adda2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a05d50e9cd40c257fd613c54d4adda2">&#9670;&nbsp;</a></span>GetAllocationCallbacks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const VkAllocationCallbacks * vkmm::Allocator_T::GetAllocationCallbacks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00944">944</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  945</span>        {</div>
<div class="line"><span class="lineno">  946</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a012a58a37d959ab717ec7ee5cbbd35b1">m_AllocationCallbacksSpecified</a> ? &amp;<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a78da199465312609d018c4a639b419e5">m_AllocationCallbacks</a> : 0;</div>
<div class="line"><span class="lineno">  947</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ff461398be4609946b016cfbbe1b5f7" name="a5ff461398be4609946b016cfbbe1b5f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ff461398be4609946b016cfbbe1b5f7">&#9670;&nbsp;</a></span>GetAllocationInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::GetAllocationInfo </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvkmm_1_1_allocation_info.html">AllocationInfo</a> *&#160;</td>
          <td class="paramname"><em>pAllocationInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l00575">575</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  576</span>    {</div>
<div class="line"><span class="lineno">  577</span>        <span class="keywordflow">if</span> (hAllocation-&gt;CanBecomeLost())</div>
<div class="line"><span class="lineno">  578</span>        {</div>
<div class="line"><span class="lineno">  579</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  580</span><span class="comment">            Warning: This is a carefully designed algorithm.</span></div>
<div class="line"><span class="lineno">  581</span><span class="comment">            Do not modify unless you really know what you&#39;re doing :)</span></div>
<div class="line"><span class="lineno">  582</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno">  583</span>            <span class="keyword">const</span> uint32_t localCurrFrameIndex = <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a89bc733d7c57eca0df546f31c166919f">m_CurrentFrameIndex</a>.load();</div>
<div class="line"><span class="lineno">  584</span>            uint32_t localLastUseFrameIndex = hAllocation-&gt;GetLastUseFrameIndex();</div>
<div class="line"><span class="lineno">  585</span>            <span class="keywordflow">for</span> (;;)</div>
<div class="line"><span class="lineno">  586</span>            {</div>
<div class="line"><span class="lineno">  587</span>                <span class="keywordflow">if</span> (localLastUseFrameIndex == FRAME_INDEX_LOST)</div>
<div class="line"><span class="lineno">  588</span>                {</div>
<div class="line"><span class="lineno">  589</span>                    pAllocationInfo-&gt;memoryType = UINT32_MAX;</div>
<div class="line"><span class="lineno">  590</span>                    pAllocationInfo-&gt;deviceMemory = VK_NULL_HANDLE;</div>
<div class="line"><span class="lineno">  591</span>                    pAllocationInfo-&gt;offset = 0;</div>
<div class="line"><span class="lineno">  592</span>                    pAllocationInfo-&gt;size = hAllocation-&gt;GetSize();</div>
<div class="line"><span class="lineno">  593</span>                    pAllocationInfo-&gt;pMappedData = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  594</span>                    pAllocationInfo-&gt;pUserData = hAllocation-&gt;GetUserData();</div>
<div class="line"><span class="lineno">  595</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  596</span>                }</div>
<div class="line"><span class="lineno">  597</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (localLastUseFrameIndex == localCurrFrameIndex)</div>
<div class="line"><span class="lineno">  598</span>                {</div>
<div class="line"><span class="lineno">  599</span>                    pAllocationInfo-&gt;memoryType = hAllocation-&gt;GetMemoryTypeIndex();</div>
<div class="line"><span class="lineno">  600</span>                    pAllocationInfo-&gt;deviceMemory = hAllocation-&gt;GetMemory();</div>
<div class="line"><span class="lineno">  601</span>                    pAllocationInfo-&gt;offset = hAllocation-&gt;GetOffset();</div>
<div class="line"><span class="lineno">  602</span>                    pAllocationInfo-&gt;size = hAllocation-&gt;GetSize();</div>
<div class="line"><span class="lineno">  603</span>                    pAllocationInfo-&gt;pMappedData = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  604</span>                    pAllocationInfo-&gt;pUserData = hAllocation-&gt;GetUserData();</div>
<div class="line"><span class="lineno">  605</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  606</span>                }</div>
<div class="line"><span class="lineno">  607</span>                <span class="keywordflow">else</span> <span class="comment">// Last use time earlier than current time.</span></div>
<div class="line"><span class="lineno">  608</span>                {</div>
<div class="line"><span class="lineno">  609</span>                    <span class="keywordflow">if</span> (hAllocation-&gt;CompareExchangeLastUseFrameIndex(localLastUseFrameIndex, localCurrFrameIndex))</div>
<div class="line"><span class="lineno">  610</span>                    {</div>
<div class="line"><span class="lineno">  611</span>                        localLastUseFrameIndex = localCurrFrameIndex;</div>
<div class="line"><span class="lineno">  612</span>                    }</div>
<div class="line"><span class="lineno">  613</span>                }</div>
<div class="line"><span class="lineno">  614</span>            }</div>
<div class="line"><span class="lineno">  615</span>        }</div>
<div class="line"><span class="lineno">  616</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  617</span>        {</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>            pAllocationInfo-&gt;memoryType = hAllocation-&gt;GetMemoryTypeIndex();</div>
<div class="line"><span class="lineno">  621</span>            pAllocationInfo-&gt;deviceMemory = hAllocation-&gt;GetMemory();</div>
<div class="line"><span class="lineno">  622</span>            pAllocationInfo-&gt;offset = hAllocation-&gt;GetOffset();</div>
<div class="line"><span class="lineno">  623</span>            pAllocationInfo-&gt;size = hAllocation-&gt;GetSize();</div>
<div class="line"><span class="lineno">  624</span>            pAllocationInfo-&gt;pMappedData = hAllocation-&gt;GetMappedData();</div>
<div class="line"><span class="lineno">  625</span>            pAllocationInfo-&gt;pUserData = hAllocation-&gt;GetUserData();</div>
<div class="line"><span class="lineno">  626</span>        }</div>
<div class="line"><span class="lineno">  627</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1a2696ed5476ecb52c7faa4c44c8457" name="ab1a2696ed5476ecb52c7faa4c44c8457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a2696ed5476ecb52c7faa4c44c8457">&#9670;&nbsp;</a></span>GetBufferImageGranularity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">VkDeviceSize vkmm::Allocator_T::GetBufferImageGranularity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00950">950</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  951</span>        {</div>
<div class="line"><span class="lineno">  952</span>            <span class="keywordflow">return</span> __max(</div>
<div class="line"><span class="lineno">  953</span>                <span class="keyword">static_cast&lt;</span>VkDeviceSize<span class="keyword">&gt;</span>(<a class="code hl_define" href="_allocator_vk_8h.html#a108aed48417d99270d41cde04cc79eb1">_DEBUG_MIN_BUFFER_IMAGE_GRANULARITY</a>),</div>
<div class="line"><span class="lineno">  954</span>                <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a>.limits.bufferImageGranularity);</div>
<div class="line"><span class="lineno">  955</span>        }</div>
<div class="ttc" id="a_allocator_vk_8h_html_a108aed48417d99270d41cde04cc79eb1"><div class="ttname"><a href="_allocator_vk_8h.html#a108aed48417d99270d41cde04cc79eb1">_DEBUG_MIN_BUFFER_IMAGE_GRANULARITY</a></div><div class="ttdeci">#define _DEBUG_MIN_BUFFER_IMAGE_GRANULARITY</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00719">AllocatorVk.h:719</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a96cdb09335ac8d7b30bfc3e2fbf66bc7" name="a96cdb09335ac8d7b30bfc3e2fbf66bc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96cdb09335ac8d7b30bfc3e2fbf66bc7">&#9670;&nbsp;</a></span>GetBufferMemoryRequirements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::GetBufferMemoryRequirements </td>
          <td>(</td>
          <td class="paramtype">VkBuffer&#160;</td>
          <td class="paramname"><em>hBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkMemoryRequirements &amp;&#160;</td>
          <td class="paramname"><em>memReq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>requiresDedicatedAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>prefersDedicatedAllocation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01110">1110</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1115</span>    {</div>
<div class="line"><span class="lineno"> 1116</span> </div>
<div class="line"><span class="lineno"> 1117</span><span class="preprocessor">#if DEDICATED_ALLOCATION</span></div>
<div class="line"><span class="lineno"> 1118</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#af916e272ecb0dbea8356c26a561c1010">m_UseKhrDedicatedAllocation</a>)</div>
<div class="line"><span class="lineno"> 1119</span>        {</div>
<div class="line"><span class="lineno"> 1120</span>            VkBufferMemoryRequirementsInfo2 memReqInfo = { VK_STRUCTURE_TYPE_BUFFER_MEMORY_REQUIREMENTS_INFO_2 };</div>
<div class="line"><span class="lineno"> 1121</span>            memReqInfo.buffer = hBuffer;</div>
<div class="line"><span class="lineno"> 1122</span> </div>
<div class="line"><span class="lineno"> 1123</span>            VkMemoryDedicatedRequirements memDedicatedReq = { VK_STRUCTURE_TYPE_MEMORY_DEDICATED_REQUIREMENTS };</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>            VkMemoryRequirements2 memReq2 = { VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2 };</div>
<div class="line"><span class="lineno"> 1126</span>            memReq2.pNext = &amp;memDedicatedReq;</div>
<div class="line"><span class="lineno"> 1127</span> </div>
<div class="line"><span class="lineno"> 1128</span>            vkGetBufferMemoryRequirements2(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, &amp;memReqInfo, &amp;memReq2);</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>            memReq = memReq2.memoryRequirements;</div>
<div class="line"><span class="lineno"> 1131</span>            requiresDedicatedAllocation = (memDedicatedReq.requiresDedicatedAllocation != VK_FALSE);</div>
<div class="line"><span class="lineno"> 1132</span>            prefersDedicatedAllocation = (memDedicatedReq.prefersDedicatedAllocation != VK_FALSE);</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>        }</div>
<div class="line"><span class="lineno"> 1135</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1136</span><span class="preprocessor">#endif </span><span class="comment">// #if VMA_DEDICATED_ALLOCATION</span></div>
<div class="line"><span class="lineno"> 1137</span>        {</div>
<div class="line"><span class="lineno"> 1138</span>            vkGetBufferMemoryRequirements(<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a700bb5300d8388aa37c21f3f14fcff50">m_hDevice</a>, hBuffer, &amp;memReq);</div>
<div class="line"><span class="lineno"> 1139</span>            requiresDedicatedAllocation = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1140</span>            prefersDedicatedAllocation = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1141</span>        }</div>
<div class="line"><span class="lineno"> 1142</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aac764fdc570ebfbc6f073bd6b6286955" name="aac764fdc570ebfbc6f073bd6b6286955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac764fdc570ebfbc6f073bd6b6286955">&#9670;&nbsp;</a></span>GetCurrentFrameIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t vkmm::Allocator_T::GetCurrentFrameIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l01034">1034</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1034</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a89bc733d7c57eca0df546f31c166919f">m_CurrentFrameIndex</a>.load(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a611463eb1d500a668c6b1f7272806e7e" name="a611463eb1d500a668c6b1f7272806e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a611463eb1d500a668c6b1f7272806e7e">&#9670;&nbsp;</a></span>GetImageMemoryRequirements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::GetImageMemoryRequirements </td>
          <td>(</td>
          <td class="paramtype">VkImage&#160;</td>
          <td class="paramname"><em>hImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VkMemoryRequirements &amp;&#160;</td>
          <td class="paramname"><em>memReq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>requiresDedicatedAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>prefersDedicatedAllocation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad4c301c65674b825666cea295f3517a1" name="ad4c301c65674b825666cea295f3517a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c301c65674b825666cea295f3517a1">&#9670;&nbsp;</a></span>GetMemoryHeapCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t vkmm::Allocator_T::GetMemoryHeapCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00957">957</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  957</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryHeapCount; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b51ad65de2321d6b1936ffb28cb0f42" name="a8b51ad65de2321d6b1936ffb28cb0f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b51ad65de2321d6b1936ffb28cb0f42">&#9670;&nbsp;</a></span>GetMemoryTypeCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t vkmm::Allocator_T::GetMemoryTypeCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00958">958</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  958</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryTypeCount; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6581a3e9a38f05c0d8525937e049dfb" name="ac6581a3e9a38f05c0d8525937e049dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6581a3e9a38f05c0d8525937e049dfb">&#9670;&nbsp;</a></span>GetMemoryTypeMinAlignment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">VkDeviceSize vkmm::Allocator_T::GetMemoryTypeMinAlignment </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memTypeIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00972">972</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  973</span>        {</div>
<div class="line"><span class="lineno">  974</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="structvkmm_1_1_allocator___t.html#a3322e10a23231f6298c75a765b75b360">IsMemoryTypeNonCoherent</a>(memTypeIndex) ?</div>
<div class="line"><span class="lineno">  975</span>                __max((VkDeviceSize)<a class="code hl_define" href="_allocator_vk_8h.html#a319c6e8ad1486d28f0f7a8e4c1d29d9a">_DEBUG_ALIGNMENT</a>, <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a>.limits.nonCoherentAtomSize) :</div>
<div class="line"><span class="lineno">  976</span>                (VkDeviceSize)<a class="code hl_define" href="_allocator_vk_8h.html#a319c6e8ad1486d28f0f7a8e4c1d29d9a">_DEBUG_ALIGNMENT</a>;</div>
<div class="line"><span class="lineno">  977</span>        }</div>
<div class="ttc" id="a_allocator_vk_8h_html_a319c6e8ad1486d28f0f7a8e4c1d29d9a"><div class="ttname"><a href="_allocator_vk_8h.html#a319c6e8ad1486d28f0f7a8e4c1d29d9a">_DEBUG_ALIGNMENT</a></div><div class="ttdeci">#define _DEBUG_ALIGNMENT</div><div class="ttdef"><b>Definition:</b> <a href="_allocator_vk_8h_source.html#l00714">AllocatorVk.h:714</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a811ea95dfa76bf5d2627bdc98f052b7f" name="a811ea95dfa76bf5d2627bdc98f052b7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a811ea95dfa76bf5d2627bdc98f052b7f">&#9670;&nbsp;</a></span>GetPoolStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::GetPoolStats </td>
          <td>(</td>
          <td class="paramtype">Pool&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvkmm_1_1_pool_stats.html">PoolStats</a> *&#160;</td>
          <td class="paramname"><em>pPoolStats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae4cf5b1c83c47aaaa99057dc9d638bb4" name="ae4cf5b1c83c47aaaa99057dc9d638bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4cf5b1c83c47aaaa99057dc9d638bb4">&#9670;&nbsp;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::Init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structvkmm_1_1_allocator_create_info.html">AllocatorCreateInfo</a> *&#160;</td>
          <td class="paramname"><em>pCreateInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l01290">1290</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1291</span>    {</div>
<div class="line"><span class="lineno"> 1292</span>        VkResult res = VK_SUCCESS;</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 1295</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7566e3e4e9ac27aae37eb527944a580d" name="a7566e3e4e9ac27aae37eb527944a580d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7566e3e4e9ac27aae37eb527944a580d">&#9670;&nbsp;</a></span>IsIntegratedGpu()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vkmm::Allocator_T::IsIntegratedGpu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00979">979</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  980</span>        {</div>
<div class="line"><span class="lineno">  981</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#ad9bcdf66b4581ef5eaa375adc1b70c1a">m_PhysicalDeviceProperties</a>.deviceType == VK_PHYSICAL_DEVICE_TYPE_INTEGRATED_GPU;</div>
<div class="line"><span class="lineno">  982</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3322e10a23231f6298c75a765b75b360" name="a3322e10a23231f6298c75a765b75b360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3322e10a23231f6298c75a765b75b360">&#9670;&nbsp;</a></span>IsMemoryTypeNonCoherent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool vkmm::Allocator_T::IsMemoryTypeNonCoherent </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memTypeIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00966">966</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  967</span>        {</div>
<div class="line"><span class="lineno">  968</span>            <span class="keywordflow">return</span> (<a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryTypes[memTypeIndex].propertyFlags &amp; (VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT)) ==</div>
<div class="line"><span class="lineno">  969</span>                VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT;</div>
<div class="line"><span class="lineno">  970</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a49262ae2e2ff6833bd3a29e9f05a662e" name="a49262ae2e2ff6833bd3a29e9f05a662e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49262ae2e2ff6833bd3a29e9f05a662e">&#9670;&nbsp;</a></span>MakePoolAllocationsLost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::MakePoolAllocationsLost </td>
          <td>(</td>
          <td class="paramtype">Pool&#160;</td>
          <td class="paramname"><em>hPool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>pLostAllocationCount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2e43e9453b2f2c6fe6ee2447286be9d0" name="a2e43e9453b2f2c6fe6ee2447286be9d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e43e9453b2f2c6fe6ee2447286be9d0">&#9670;&nbsp;</a></span>Map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkResult vkmm::Allocator_T::Map </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ppData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l00882">882</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  883</span>    {</div>
<div class="line"><span class="lineno">  884</span>        <span class="keywordflow">if</span> (hAllocation-&gt;CanBecomeLost())</div>
<div class="line"><span class="lineno">  885</span>        {</div>
<div class="line"><span class="lineno">  886</span>            <span class="keywordflow">return</span> VK_ERROR_MEMORY_MAP_FAILED;</div>
<div class="line"><span class="lineno">  887</span>        }</div>
<div class="line"><span class="lineno">  888</span> </div>
<div class="line"><span class="lineno">  889</span>        <span class="keywordflow">switch</span> (hAllocation-&gt;GetType())</div>
<div class="line"><span class="lineno">  890</span>        {</div>
<div class="line"><span class="lineno">  891</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0aba26468b3e47bb390ac8ae26daaa16b473">Allocation_T::ALLOCATION_TYPE_BLOCK</a>:</div>
<div class="line"><span class="lineno">  892</span>        {</div>
<div class="line"><span class="lineno">  893</span>            <span class="comment">/*COM</span></div>
<div class="line"><span class="lineno">  894</span><span class="comment">            DeviceMemoryBlock* const pBlock = hAllocation-&gt;GetBlock();</span></div>
<div class="line"><span class="lineno">  895</span><span class="comment">            char* pBytes = VMA_NULL;</span></div>
<div class="line"><span class="lineno">  896</span><span class="comment">            VkResult res = pBlock-&gt;Map(this, 1, (void**)&amp;pBytes);</span></div>
<div class="line"><span class="lineno">  897</span><span class="comment">            if (res == VK_SUCCESS)</span></div>
<div class="line"><span class="lineno">  898</span><span class="comment">            {</span></div>
<div class="line"><span class="lineno">  899</span><span class="comment">                *ppData = pBytes + (ptrdiff_t)hAllocation-&gt;GetOffset();</span></div>
<div class="line"><span class="lineno">  900</span><span class="comment">                hAllocation-&gt;BlockAllocMap();</span></div>
<div class="line"><span class="lineno">  901</span><span class="comment">            }</span></div>
<div class="line"><span class="lineno">  902</span><span class="comment">            return res;</span></div>
<div class="line"><span class="lineno">  903</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno">  904</span>        }</div>
<div class="line"><span class="lineno">  905</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32">Allocation_T::ALLOCATION_TYPE_DEDICATED</a>:</div>
<div class="line"><span class="lineno">  906</span>            <span class="keywordflow">return</span> hAllocation-&gt;DedicatedAllocMap(<span class="keyword">this</span>, ppData);</div>
<div class="line"><span class="lineno">  907</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  908</span>            assert(0);</div>
<div class="line"><span class="lineno">  909</span>            <span class="keywordflow">return</span> VK_ERROR_MEMORY_MAP_FAILED;</div>
<div class="line"><span class="lineno">  910</span>        }</div>
<div class="line"><span class="lineno">  911</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aab3b1cc35b312451179acc4ad8ad5a61" name="aab3b1cc35b312451179acc4ad8ad5a61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab3b1cc35b312451179acc4ad8ad5a61">&#9670;&nbsp;</a></span>MemoryTypeIndexToHeapIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t vkmm::Allocator_T::MemoryTypeIndexToHeapIndex </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>memTypeIndex</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00960">960</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  961</span>        {</div>
<div class="line"><span class="lineno">  962</span>            assert(memTypeIndex &lt; <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryTypeCount);</div>
<div class="line"><span class="lineno">  963</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a0fbf088e770a2ea8a42b4b421fb928a9">m_MemProps</a>.memoryTypes[memTypeIndex].heapIndex;</div>
<div class="line"><span class="lineno">  964</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c88aa6f5a62bad5e5ff12313147745a" name="a2c88aa6f5a62bad5e5ff12313147745a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c88aa6f5a62bad5e5ff12313147745a">&#9670;&nbsp;</a></span>SetCurrentFrameIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::SetCurrentFrameIndex </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>frameIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae70583496b835894f74ecc84bd15e948" name="ae70583496b835894f74ecc84bd15e948"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae70583496b835894f74ecc84bd15e948">&#9670;&nbsp;</a></span>TouchAllocation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vkmm::Allocator_T::TouchAllocation </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l00648">648</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  649</span>    {</div>
<div class="line"><span class="lineno">  650</span>        <span class="comment">// This is a stripped-down version of VmaAllocator_T::GetAllocationInfo.</span></div>
<div class="line"><span class="lineno">  651</span>        <span class="keywordflow">if</span> (hAllocation-&gt;CanBecomeLost())</div>
<div class="line"><span class="lineno">  652</span>        {</div>
<div class="line"><span class="lineno">  653</span>            uint32_t localCurrFrameIndex = <a class="code hl_variable" href="structvkmm_1_1_allocator___t.html#a89bc733d7c57eca0df546f31c166919f">m_CurrentFrameIndex</a>.load();</div>
<div class="line"><span class="lineno">  654</span>            uint32_t localLastUseFrameIndex = hAllocation-&gt;GetLastUseFrameIndex();</div>
<div class="line"><span class="lineno">  655</span>            <span class="keywordflow">for</span> (;;)</div>
<div class="line"><span class="lineno">  656</span>            {</div>
<div class="line"><span class="lineno">  657</span>                <span class="keywordflow">if</span> (localLastUseFrameIndex == FRAME_INDEX_LOST)</div>
<div class="line"><span class="lineno">  658</span>                {</div>
<div class="line"><span class="lineno">  659</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  660</span>                }</div>
<div class="line"><span class="lineno">  661</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (localLastUseFrameIndex == localCurrFrameIndex)</div>
<div class="line"><span class="lineno">  662</span>                {</div>
<div class="line"><span class="lineno">  663</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  664</span>                }</div>
<div class="line"><span class="lineno">  665</span>                <span class="keywordflow">else</span> <span class="comment">// Last use time earlier than current time.</span></div>
<div class="line"><span class="lineno">  666</span>                {</div>
<div class="line"><span class="lineno">  667</span>                    <span class="keywordflow">if</span> (hAllocation-&gt;CompareExchangeLastUseFrameIndex(localLastUseFrameIndex, localCurrFrameIndex))</div>
<div class="line"><span class="lineno">  668</span>                    {</div>
<div class="line"><span class="lineno">  669</span>                        localLastUseFrameIndex = localCurrFrameIndex;</div>
<div class="line"><span class="lineno">  670</span>                    }</div>
<div class="line"><span class="lineno">  671</span>                }</div>
<div class="line"><span class="lineno">  672</span>            }</div>
<div class="line"><span class="lineno">  673</span>        }</div>
<div class="line"><span class="lineno">  674</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  675</span>        {</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  679</span>        }</div>
<div class="line"><span class="lineno">  680</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a45acc41c204faa509d847343cf809695" name="a45acc41c204faa509d847343cf809695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45acc41c204faa509d847343cf809695">&#9670;&nbsp;</a></span>Unmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vkmm::Allocator_T::Unmap </td>
          <td>(</td>
          <td class="paramtype">Allocation&#160;</td>
          <td class="paramname"><em>hAllocation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8cpp_source.html#l00913">913</a> of file <a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  914</span>    {</div>
<div class="line"><span class="lineno">  915</span>        <span class="keywordflow">switch</span> (hAllocation-&gt;GetType())</div>
<div class="line"><span class="lineno">  916</span>        {</div>
<div class="line"><span class="lineno">  917</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0aba26468b3e47bb390ac8ae26daaa16b473">Allocation_T::ALLOCATION_TYPE_BLOCK</a>:</div>
<div class="line"><span class="lineno">  918</span>        {</div>
<div class="line"><span class="lineno">  919</span>            <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  920</span><span class="comment">            VmaDeviceMemoryBlock* const pBlock = hAllocation-&gt;GetBlock();</span></div>
<div class="line"><span class="lineno">  921</span><span class="comment">            hAllocation-&gt;BlockAllocUnmap();</span></div>
<div class="line"><span class="lineno">  922</span><span class="comment">            pBlock-&gt;Unmap(this, 1);</span></div>
<div class="line"><span class="lineno">  923</span><span class="comment">            */</span></div>
<div class="line"><span class="lineno">  924</span>        }</div>
<div class="line"><span class="lineno">  925</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  926</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structvkmm_1_1_allocation___t.html#a1c61d39101ce6323ab4ca9d95b32d0abaaf97e8012a74ed2d9c564cb5f8b23d32">Allocation_T::ALLOCATION_TYPE_DEDICATED</a>:</div>
<div class="line"><span class="lineno">  927</span>            hAllocation-&gt;DedicatedAllocUnmap(<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  928</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  929</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  930</span>            assert(0);</div>
<div class="line"><span class="lineno">  931</span>        }</div>
<div class="line"><span class="lineno">  932</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a78da199465312609d018c4a639b419e5" name="a78da199465312609d018c4a639b419e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78da199465312609d018c4a639b419e5">&#9670;&nbsp;</a></span>m_AllocationCallbacks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkAllocationCallbacks vkmm::Allocator_T::m_AllocationCallbacks</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00918">918</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a012a58a37d959ab717ec7ee5cbbd35b1" name="a012a58a37d959ab717ec7ee5cbbd35b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a012a58a37d959ab717ec7ee5cbbd35b1">&#9670;&nbsp;</a></span>m_AllocationCallbacksSpecified</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vkmm::Allocator_T::m_AllocationCallbacksSpecified</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00917">917</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a89bc733d7c57eca0df546f31c166919f" name="a89bc733d7c57eca0df546f31c166919f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89bc733d7c57eca0df546f31c166919f">&#9670;&nbsp;</a></span>m_CurrentFrameIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;UINT&gt; vkmm::Allocator_T::m_CurrentFrameIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l01064">1064</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a992a462f20ad09c02d8e95739546be39" name="a992a462f20ad09c02d8e95739546be39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a992a462f20ad09c02d8e95739546be39">&#9670;&nbsp;</a></span>m_DeviceMemoryCallbacks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvkmm_1_1_device_memory_callbacks.html">DeviceMemoryCallbacks</a> vkmm::Allocator_T::m_DeviceMemoryCallbacks</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00919">919</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a700bb5300d8388aa37c21f3f14fcff50" name="a700bb5300d8388aa37c21f3f14fcff50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a700bb5300d8388aa37c21f3f14fcff50">&#9670;&nbsp;</a></span>m_hDevice</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkDevice vkmm::Allocator_T::m_hDevice</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00916">916</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a2c0d6ad490b2b9b07143a92f27b1adf5" name="a2c0d6ad490b2b9b07143a92f27b1adf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c0d6ad490b2b9b07143a92f27b1adf5">&#9670;&nbsp;</a></span>m_HeapSizeLimit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkDeviceSize vkmm::Allocator_T::m_HeapSizeLimit[<a class="el" href="_allocator_vk_8h.html#a99d48e5e4c73610e657f431f4129663a">VK_MAX_MEMORY_HEAPS_MIN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00922">922</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a0fbf088e770a2ea8a42b4b421fb928a9" name="a0fbf088e770a2ea8a42b4b421fb928a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fbf088e770a2ea8a42b4b421fb928a9">&#9670;&nbsp;</a></span>m_MemProps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkPhysicalDeviceMemoryProperties vkmm::Allocator_T::m_MemProps</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00926">926</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a27ded6e6d2732ed51a306f0fd57266a6" name="a27ded6e6d2732ed51a306f0fd57266a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ded6e6d2732ed51a306f0fd57266a6">&#9670;&nbsp;</a></span>m_NextPoolId</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t vkmm::Allocator_T::m_NextPoolId</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l01069">1069</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a1c10650c8d62bf794fec91e8229ca8d9" name="a1c10650c8d62bf794fec91e8229ca8d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c10650c8d62bf794fec91e8229ca8d9">&#9670;&nbsp;</a></span>m_pDedicatedAllocations</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvkmm_1_1_allocator___t.html#afebd6caedfdce2fe7b4b0a53b959e012">AllocMapMapTy</a> vkmm::Allocator_T::m_pDedicatedAllocations</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00936">936</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a51ad577328dd317548b1f480420808ad" name="a51ad577328dd317548b1f480420808ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51ad577328dd317548b1f480420808ad">&#9670;&nbsp;</a></span>m_PhysicalDevice</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkPhysicalDevice vkmm::Allocator_T::m_PhysicalDevice</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l01063">1063</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="ad9bcdf66b4581ef5eaa375adc1b70c1a" name="ad9bcdf66b4581ef5eaa375adc1b70c1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9bcdf66b4581ef5eaa375adc1b70c1a">&#9670;&nbsp;</a></span>m_PhysicalDeviceProperties</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkPhysicalDeviceProperties vkmm::Allocator_T::m_PhysicalDeviceProperties</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>COM VMA_MUTEX m_HeapSizeLimitMutex;. </p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00925">925</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a6babc882fdedd2f2964af42bb0f631a0" name="a6babc882fdedd2f2964af42bb0f631a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6babc882fdedd2f2964af42bb0f631a0">&#9670;&nbsp;</a></span>m_Pools</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_allocator_vk_8h.html#a54a7d528826c6e4b91b347493b62e2ba">VkmmVector</a>&lt;Pool, <a class="el" href="classvkmm_1_1_stl_allocator.html">StlAllocator</a>&lt;Pool&gt; &gt; vkmm::Allocator_T::m_Pools</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>COM VMA_MUTEX m_PoolsMutex;. </p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l01068">1068</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="aa62ce8d2fa448c42f9def5045086f96a" name="aa62ce8d2fa448c42f9def5045086f96a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa62ce8d2fa448c42f9def5045086f96a">&#9670;&nbsp;</a></span>m_PreferredLargeHeapBlockSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VkDeviceSize vkmm::Allocator_T::m_PreferredLargeHeapBlockSize</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>private: </p>

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l01061">1061</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="af916e272ecb0dbea8356c26a561c1010" name="af916e272ecb0dbea8356c26a561c1010"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af916e272ecb0dbea8356c26a561c1010">&#9670;&nbsp;</a></span>m_UseKhrDedicatedAllocation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vkmm::Allocator_T::m_UseKhrDedicatedAllocation</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00915">915</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="abdd142a2e85732ac7f07577bf94a24f2" name="abdd142a2e85732ac7f07577bf94a24f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd142a2e85732ac7f07577bf94a24f2">&#9670;&nbsp;</a></span>m_UseMutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vkmm::Allocator_T::m_UseMutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00914">914</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<a id="a51507d8e15e667518e7feced00deb9da" name="a51507d8e15e667518e7feced00deb9da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51507d8e15e667518e7feced00deb9da">&#9670;&nbsp;</a></span>slim</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SRWLOCK vkmm::Allocator_T::slim</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_allocator_vk_8h_source.html#l00912">912</a> of file <a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li><a class="el" href="_allocator_vk_8h_source.html">AllocatorVk.h</a></li>
<li><a class="el" href="_allocator_vk_8cpp_source.html">AllocatorVk.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacevkmm.html">vkmm</a></li><li class="navelem"><a class="el" href="structvkmm_1_1_allocator___t.html">Allocator_T</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
